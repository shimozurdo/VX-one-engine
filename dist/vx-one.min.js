!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("vx",[],e):"object"==typeof exports?exports.vx=e():t.vx=e()}(self,(function(){return(()=>{"use strict";var t={835:(t,e,n)=>{function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n.d(e,{Camera:()=>xt,Container:()=>o,Game:()=>tt,Graph:()=>u,Graphics:()=>I,Scale:()=>i,Scene:()=>p,Sprite:()=>E,State:()=>c,Text:()=>X,TextureManager:()=>rt,TileMap:()=>st,math:()=>pt});const o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pos={x:0,y:0},this.children=[]}var e,n;return e=t,(n=[{key:"update",value:function(t,e){var n=this;this.children=this.children.filter((function(r){return r.update&&r.update(t,e,n),!r.dead}))}},{key:"add",value:function(t){return this.children.push(t),t}},{key:"remove",value:function(t){return this.children=this.children.filter((function(e){return e!==t})),t}},{key:"map",value:function(t){return this.children.map(t)}}])&&r(e.prototype,n),t}();var i={RESIZE:0,NONE:1},c={NONE:0,LOADING:1,READY:2,RUNNING:3,SLEEPING:4},u={ROUND_RECT:0,RECT:1};function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=h(e);if(n){var o=h(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return l(this,t)});function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return f(this,o),(e=r.call(this)).key=t,e.active=n,e.state=c.NONE,e.controls,e}return o}(o);function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}const v=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;b(this,t),this.name=e,this.pos={x:0,y:0},this.scale={x:1,y:1},this.anchor={x:0,y:0},this.pivot={x:0,y:0},this.rotation=0,this.visible=!0,this.zIndex=1};function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),t}var w=function(){function t(e,n){d(this,t),this.frames=e,this.rate=n,this.reset()}return g(t,[{key:"reset",value:function(){this.frame=this.frames[0],this.curFrame=0,this.curTime=0}},{key:"update",value:function(t){var e=this.rate,n=this.frames;(this.curTime+=t)>e&&(this.curFrame++,this.frame=n[this.curFrame%n.length],this.curTime-=e)}}]),t}();const O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};d(this,t),this.anims={},this.running=!1,this.frameSource=e.frame||e,this.current=null}return g(t,[{key:"add",value:function(t,e,n){return this.anims[t]=new w(e,n),this.anims[t]}},{key:"update",value:function(t){var e=this.current,n=this.anims,r=this.frameSource;if(e){var o=n[e];o.update(t),r.x=o.frame.x,r.y=o.frame.y}}},{key:"play",value:function(t){var e=this.current,n=this.anims;t!==e&&(this.current=t,n[t].reset())}},{key:"stop",value:function(){this.current=null}}]),t}();function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return R(this,t)});function c(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return S(this,c),(t=i.call(this)).texture=e,t.tileW=n,t.tileH=r,t.frame={x:0,y:0},t.anims=new O(_(t)),t}return e=c,(n=[{key:"update",value:function(t){this.anims.update(t)}},{key:"w",get:function(){return this.tileW*Math.abs(this.scale.x)}},{key:"h",get:function(){return this.tileH*Math.abs(this.scale.y)}}])&&j(e.prototype,n),c}(v);function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=A(e);if(n){var o=A(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return D(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return C(this,o),(t=r.call(this)).type=e,t.src={},t}return o}(v);function N(t){throw new TypeError('"'+t+'" is read-only')}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const H=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=document.createElement("canvas");this.view=n,this.ctx=n.getContext("2d"),this.ctx.textBaseline="top",this.w=n.width=e.w,this.h=n.height=e.h,e.pixel&&(n.style.imageRendering="pixelated",this.ctx.imageSmoothingEnabled=!1)}var e,n;return e=t,(n=[{key:"render",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!=t.active){var n=this.ctx,r=this.w,o=this.h;e&&n.clearRect(0,0,r,o),i(t)}function i(t){t.children.forEach((function(t){if(0!=t.visible){if(n.save(),t.pos&&n.translate(Math.round(t.pos.x),Math.round(t.pos.y)),t.anchor&&n.translate(t.anchor.x,t.anchor.y),t.scale&&n.scale(t.scale.x,t.scale.y),t.rotation){var e=t.pivot?t.pivot.x:0,r=t.pivot?t.pivot.y:0;n.translate(e,r),n.rotate(t.rotation),n.translate(-e,-r)}if(t.text){var o=t.style,c=o.font,a=o.fill,f=o.align;c&&(n.font=c),a&&(n.fillStyle=a),f&&(n.textAlign=f),n.fillText(t.text,0,0)}else if(t instanceof E&&t.texture){var s=t.texture;t.tileW?n.drawImage(s,t.frame.x*t.tileW,t.frame.y*t.tileH,t.tileW,t.tileH,0,0,t.tileW,t.tileH):n.drawImage(s,0,0)}else if(t instanceof I)if(t.type===u.ROUND_RECT){var l=t.src,y=l.w,h=l.h,p=l.r,b=l.fill,v=t.pos,d=v.x,m=v.y;n.strokeStyle=b,y<2*p&&(N("r"),p=y/2),h<2*p&&(N("r"),p=h/2),n.beginPath(),n.moveTo(d+p,m),n.arcTo(d+y,m,d+y,m+h,p),n.arcTo(d+y,m+h,d,m+h,p),n.arcTo(d,m+h,d,m,p),n.arcTo(d,m,d+y,m,p),n.stroke(),n.closePath()}else if(t.type===u.RECT){var g=t.src,w=g.w,O=g.h,x=g.fill;n.fillStyle=x,n.fillRect(0,0,w,O)}t.children&&i(t),n.restore()}}))}}}])&&W(e.prototype,n),t}();function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var F=function(){function t(){var e=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.keys={},document.addEventListener("keydown",(function(t){[37,38,39,40,32].indexOf(t.which)>=0&&t.preventDefault(),e.keys[t.keyCode]=!0}),!1),document.addEventListener("keyup",(function(t){e.keys[t.which]=!1}),!1)}return e=t,(n=[{key:"key",value:function(t,e){return void 0!==e&&(this.keys[t]=e),this.keys[t]}},{key:"reset",value:function(){for(var t in this.keys)this.keys[t]=!1}},{key:"action",get:function(){return this.keys[32]}},{key:"x",get:function(){return this.keys[37]||this.keys[65]?-1:this.keys[39]||this.keys[68]?1:0}},{key:"y",get:function(){return this.keys[38]||this.keys[87]?-1:this.keys[40]||this.keys[83]?1:0}}])&&L(e.prototype,n),r&&L(e,r),t;var e,n,r}();function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t,e){return!e||"object"!==G(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=B(e);if(n){var o=B(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return q(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return z(this,o),(t=r.call(this)).text=e,t.style,t}return o}(v);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Z(t,e){return!e||"object"!==V(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=$(e);if(n){var o=$(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Z(this,t)});function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).active=!1;var e=new X("fps: ");return e.name="fps",e.pos={x:5,y:15},e.style={font:"16px Arial",fill:"red",align:"left"},t.add(e),t}return o}(o);function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const tt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,"step",1/60),Q(this,"MAX_FRAME",5*this.step),this.w=e.w,this.h=e.h,this.renderer=this.createRenderer(e),this.scenes=[],this.scene,this.textures,this.controls=new F,this.debug=new J,this.debug.active=e.debugMode}var e,n;return e=t,(n=[{key:"addScene",value:function(t){this.debug.active&&t.add(this.debug),this.scene||(this.scene=t),this.scenes.push(t)}},{key:"launchScene",value:function(t){this.scene=this.scenes.find((function(e){return e.key===t})),this.scene.init()}},{key:"run",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=this.MAX_FRAME,r=0,o=0,i=0,c=function c(u){requestAnimationFrame(c);var a=u/1e3;r=Math.min(a-o,n),o=a,i=Math.round(1/r),!t.scene&&t.debug.active||(t.debug.active&&(t.scene.children.find((function(t){return t instanceof J})).children.find((function(t){return"fps"===t.name})).text="fps: "+i),t.scene.update(r,a),e(r,a,t.controls),t.renderer.render(t.scene))};requestAnimationFrame(c)}},{key:"createRenderer",value:function(t){var e=new H(t),n=t.parent||"game";return document.querySelector(t.parent)||(document.body.innerHTML='<div id="'+n+'"></div>'),document.getElementById(n).appendChild(e.view),e}}])&&K(e.prototype,n),t}();function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const rt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.urls=e,this.imgs={}}var e,n;return e=t,(n=[{key:"load",value:function(t){var e=this,n=this.urls.map((function(t){return e.loadImage(t)}));Promise.all(n).then((function(n){var r,o=e.imgs=Object.assign.apply(Object,function(t){if(Array.isArray(t))return et(t)}(r=n)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return t(o)})).catch((function(e){return t(e)}))}},{key:"loadImage",value:function(t){return new Promise((function(e,n){var r=new Image;r.addEventListener("load",(function(){var n,o,i,c=(n={},o=t[0],i=r,o in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n);e(c)})),r.addEventListener("error",(function(){console.error("Error when loading an image"),n()})),r.src=t[1]}))}}])&&nt(e.prototype,n),t}();function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t,e){return!e||"object"!==ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ft(r);if(o){var n=ft(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return at(this,t)});function c(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return it(this,c),(t=i.call(this)).mapW,t.mapH,t.tileW,t.tileH,t.texture=e,t.children=[],t}return e=c,(n=[{key:"addTiles",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.children=t.map((function(t,r){var o=new E;return o.frame=t,o.scale={x:n,y:n},o.pos.x=r%e.mapW*e.tileW,o.pos.y=Math.floor(r/e.mapW)*e.tileH,o.tileW=e.tileW,o.tileH=e.tileH,o.texture=e.texture,o}))}}])&&ct(e.prototype,n),c}(o);function lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ht(t,e){return null==e&&(e=t||1,t=0),Math.random()*(e-t)+t}const pt={Vector2:function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;lt(this,t),this.x=e,this.y=n}var e,n;return e=t,(n=[{key:"add",value:function(e){return e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=e),this}},{key:"subtract",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiply",value:function(e){return e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=e),this}},{key:"normalize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.Length();return e>0?this.Multiply(t/e):this.Set(t,y=0)}},{key:"length",value:function(){return Math.hypot(this.x,this.y)}}])&&yt(e.prototype,n),t}(),RGBA:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return"rgba(".concat(255*t|0,",").concat(255*e|0,",").concat(255*n|0,",").concat(r,")")},rand:function(t,e){return Math.floor(ht(t,e))},randf:ht,clamp:function(t,e,n){return Math.max(e,Math.min(t,n))}};function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mt(t,e,n){return(mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ot(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function gt(t,e){return(gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wt(t,e){return!e||"object"!==bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ot(r);if(o){var n=Ot(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function c(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return vt(this,c),(n=i.call(this)).w=e.w,n.h=e.h,n.worldSize=r,n.setSubject(t),n}return e=c,(n=[{key:"setSubject",value:function(t){this.subject=t?t.pos||t:this.pos,this.offset={x:0,y:0},t&&t.w&&(this.offset.x+=t.w/2,this.offset.y+=t.h/2),t&&t.anchor&&(this.offset.x-=t.anchor.x,this.offset.y-=t.anchor.y),this.focus()}},{key:"focus",value:function(){var t=this.pos,e=this.w,n=this.h,r=this.worldSize,o=this.subject,i=this.offset,c=o.x+i.x-e/2,u=r.w-e,a=-pt.clamp(c,0,u),f=o.y+i.y-n/2,s=r.h-n,l=-pt.clamp(f,0,s);t.x=a,t.y=l}},{key:"update",value:function(t,e){mt(Ot(c.prototype),"update",this).call(this,t,e),this.subject&&this.focus()}}])&&dt(e.prototype,n),c}(o)}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}return n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(835)})()}));