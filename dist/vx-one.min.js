!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("vx",[],e):"object"==typeof exports?exports.vx=e():t.vx=e()}(self,(function(){return(()=>{"use strict";var t={895:(t,e,n)=>{function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n.d(e,{Camera:()=>st,Container:()=>o,Game:()=>V,Scene:()=>s,Sprite:()=>_,Text:()=>F,Texture:()=>J,TileMap:()=>nt,math:()=>U});const o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pos={x:0,y:0},this.children=[]}var e,n;return e=t,(n=[{key:"update",value:function(t,e){var n=this;this.children=this.children.filter((function(r){return r.update&&r.update(t,e,n),!r.dead}))}},{key:"add",value:function(t){return this.children.push(t),t}},{key:"remove",value:function(t){return this.children=this.children.filter((function(e){return e!==t})),t}},{key:"map",value:function(t){return this.children.map(t)}}])&&r(e.prototype,n),t}();function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=a(e);if(n){var o=a(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return f(this,t)});function o(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return c(this,o),(e=r.call(this)).key=t,e.children=[],e.active=n,e.controls,e}return o}(o);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}const h=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l(this,t),this.name=e,this.pos={x:0,y:0},this.scale={x:1,y:1},this.anchor={x:0,y:0},this.pivot={x:0,y:0},this.rotation=0,this.visible=!0,this.zIndex=1};function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}var v=function(){function t(e,n){p(this,t),this.frames=e,this.rate=n,this.reset()}return d(t,[{key:"reset",value:function(){this.frame=this.frames[0],this.curFrame=0,this.curTime=0}},{key:"update",value:function(t){var e=this.rate,n=this.frames;(this.curTime+=t)>e&&(this.curFrame++,this.frame=n[this.curFrame%n.length],this.curTime-=e)}}]),t}();const m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};p(this,t),this.anims={},this.running=!1,this.frameSource=e.frame||e,this.current=null}return d(t,[{key:"add",value:function(t,e,n){return this.anims[t]=new v(e,n),this.anims[t]}},{key:"update",value:function(t){var e=this.current,n=this.anims,r=this.frameSource;if(e){var o=n[e];o.update(t),r.x=o.frame.x,r.y=o.frame.y}}},{key:"play",value:function(t){var e=this.current,n=this.anims;t!==e&&(this.current=t,n[t].reset())}},{key:"stop",value:function(){this.current=null}}]),t}();function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?S(t):e}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(r);if(o){var n=j(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return k(this,t)});function c(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return w(this,c),(t=i.call(this)).texture=e,t.tileW=n,t.tileH=r,t.frame={x:0,y:0},t.anims=new m(S(t)),t}return e=c,(n=[{key:"update",value:function(t){this.anims.update(t)}},{key:"w",get:function(){return this.tileW*Math.abs(this.scale.x)}},{key:"h",get:function(){return this.tileH*Math.abs(this.scale.y)}}])&&x(e.prototype,n),c}(h);function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const R=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=document.createElement("canvas");this.view=n,this.ctx=n.getContext("2d"),this.ctx.textBaseline="top",this.width=n.width=e.width,this.height=n.height=e.height,this.backgroundColor=e.backgroundColor||"white",e.pixel&&(n.style.imageRendering="pixelated",this.ctx.imageSmoothingEnabled=!1)}var e,n;return e=t,(n=[{key:"render",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!=t.active){var n=this.ctx,r=this.width,o=this.height;this.backgroundColor,e&&n.clearRect(0,0,r,o),i(t)}function i(t){t.children.forEach((function(t){if(0!=t.visible){if(n.save(),t.pos&&n.translate(Math.round(t.pos.x),Math.round(t.pos.y)),t.anchor&&n.translate(t.anchor.x,t.anchor.y),t.scale&&n.scale(t.scale.x,t.scale.y),t.rotation){var e=t.pivot?t.pivot.x:0,c=t.pivot?t.pivot.y:0;n.translate(e,c),n.rotate(t.rotation),n.translate(-e,-c)}if(t.text){var u=t.style,f=u.font,a=u.fill,s=u.align;f&&(n.font=f),a&&(n.fillStyle=a),s&&(n.textAlign=s),n.fillText(t.text,0,0)}else if(t.texture&&t instanceof _){var l=t.texture.img;t.tileW?n.drawImage(l,t.frame.x*t.tileW,t.frame.y*t.tileH,t.tileW,t.tileH,0,0,t.tileW,t.tileH):n.drawImage(l,0,0)}else t.lines&&n.clearRect(0,0,r,o);t.children&&i(t),n.restore()}}))}}}])&&P(e.prototype,n),t}();function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var T=function(){function t(){var e=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.keys={},document.addEventListener("keydown",(function(t){[37,38,39,40,32].indexOf(t.which)>=0&&t.preventDefault(),e.keys[t.keyCode]=!0}),!1),document.addEventListener("keyup",(function(t){e.keys[t.which]=!1}),!1)}return e=t,(n=[{key:"key",value:function(t,e){return void 0!==e&&(this.keys[t]=e),this.keys[t]}},{key:"reset",value:function(){for(var t in this.keys)this.keys[t]=!1}},{key:"action",get:function(){return this.keys[32]}},{key:"x",get:function(){return this.keys[37]||this.keys[65]?-1:this.keys[39]||this.keys[68]?1:0}},{key:"y",get:function(){return this.keys[38]||this.keys[87]?-1:this.keys[40]||this.keys[83]?1:0}}])&&E(e.prototype,n),r&&E(e,r),t;var e,n,r}(),C=1/60*5;function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function H(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=A(e);if(n){var o=A(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return H(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return D(this,o),(t=r.call(this)).text=e,t.style,t}return o}(h);function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=q(e);if(n){var o=q(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return L(this,t)});function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).active=!1;var e=new F("fps: ");return e.name="fps",e.pos={x:5,y:15},e.style={font:"16px Arial",fill:"red",align:"left"},t.add(e),t}return o}(o);function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const V=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e.width,this.height=e.height,this.renderer=this.createRenderer(e),this.scenes=[],this.scene,this.controls=new T,this.debug=new B,this.debug.active=e.debugMode}var e,n;return e=t,(n=[{key:"addScene",value:function(t){return this.scenes.push(t),this.scene=t,this.scene.controls=this.controls,t}},{key:"run",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.debug.active&&this.scene.add(this.debug);var n=0,r=0,o=0,i=function i(c){requestAnimationFrame(i);var u=c/1e3;n=Math.min(u-r,C),r=u,o=Math.round(1/n),t.debug.active&&(t.scene.children.find((function(t){return t instanceof B})).children.find((function(t){return"fps"===t.name})).text="fps: "+o),t.scene.update(n,u),e(n,u,t.controls),t.renderer.render(t.scene)};requestAnimationFrame(i)}},{key:"createRenderer",value:function(t){var e=new R(t),n=t.parent||"game";return document.querySelector(t.parent)||(document.body.innerHTML='<div id="'+n+'"></div>'),document.getElementById(n).appendChild(e.view),e}}])&&G(e.prototype,n),t}(),J=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.img=new Image,this.img.src=e};function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e){return null==e&&(e=t||1,t=0),Math.random()*(e-t)+t}const U={Vector2:function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;K(this,t),this.x=e,this.y=n}var e,n;return e=t,(n=[{key:"add",value:function(e){return e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=e),this}},{key:"subtract",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiply",value:function(e){return e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=e),this}},{key:"normalize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.Length();return e>0?this.Multiply(t/e):this.Set(t,y=0)}},{key:"length",value:function(){return Math.hypot(this.x,this.y)}}])&&N(e.prototype,n),t}(),RGBA:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return"rgba(".concat(255*t|0,",").concat(255*e|0,",").concat(255*n|0,",").concat(r,")")},rand:function(t,e){return Math.floor(Q(t,e))},randf:Q,clamp:function(t,e,n){return Math.max(e,Math.min(t,n))}};function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tt(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=et(r);if(o){var n=et(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return tt(this,t)});function c(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Y(this,c),(t=i.call(this)).mapW,t.mapH,t.tileW,t.tileH,t.texture=e,t.children=[],t}return e=c,(n=[{key:"addTiles",value:function(t){var e=this;this.children=t.map((function(t,n){var r=new _;return r.frame=t,r.pos.x=n%e.mapW*e.tileW,r.pos.y=Math.floor(n/e.mapW)*e.tileH,r.tileW=e.tileW,r.tileH=e.tileH,r.texture=e.texture,r}))}}])&&Z(e.prototype,n),c}(o);function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ct(t,e,n){return(ct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=at(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ft(t,e){return!e||"object"!==rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=at(r);if(o){var n=at(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ft(this,t)});function c(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return ot(this,c),(n=i.call(this)).w=e.w,n.h=e.h,n.worldSize=r,n.setSubject(t),n}return e=c,(n=[{key:"setSubject",value:function(t){this.subject=t?t.pos||t:this.pos,this.offset={x:0,y:0},t&&t.w&&(this.offset.x+=t.w/2,this.offset.y+=t.h/2),t&&t.anchor&&(this.offset.x-=t.anchor.x,this.offset.y-=t.anchor.y),this.focus()}},{key:"focus",value:function(){var t=this.pos,e=this.w,n=this.h,r=this.worldSize,o=this.subject,i=this.offset,c=o.x+i.x-e/2,u=r.w-e,f=-U.clamp(c,0,u),a=o.y+i.y-n/2,s=r.h-n,l=-U.clamp(a,0,s);t.x=f,t.y=l}},{key:"update",value:function(t,e){ct(at(c.prototype),"update",this).call(this,t,e),this.subject&&this.focus()}}])&&it(e.prototype,n),c}(o)}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}return n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(895)})()}));