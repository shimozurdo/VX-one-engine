!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("vx",[],e):"object"==typeof exports?exports.vx=e():t.vx=e()}(self,(function(){return(()=>{"use strict";var t={868:(t,e,n)=>{function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n.d(e,{Game:()=>v,GameObject:()=>i,Render:()=>u,Scene:()=>d,Sprite:()=>R,Text:()=>S,TileMap:()=>W,math:()=>_});const i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},o=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;r(this,t),this.name=e,this.size=o,this.pos=n,this.children=[],this.visible=i,this.active=c}var e,n;return e=t,(n=[{key:"add",value:function(t){return this.children.push(t),t}},{key:"remove",value:function(t){return this.children=this.children.filter((function(e){return e!==t})),t}},{key:"map",value:function(t){return this.children.map(t)}},{key:"update",value:function(t,e){var n=this;this.children=this.children.filter((function(r){return r.update&&r.update(t,e,n),!r.dead}))}}])&&o(e.prototype,n),t}();function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=document.createElement("canvas");this.width=n.width=e.width,this.height=n.height=e.height,this.view=n,this.ctx=n.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.ctx.textBaseline="top",this.backgroundColor=e.backgroundColor}var e,n;return e=t,(n=[{key:"render",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0!=t.active){var r=this.ctx,o=this.width,i=this.height,c=this.backgroundColor;r.save(),r.fillStyle=c||"black",r.fillRect(0,0,o,i),n&&r.clearRect(0,0,this.w,this.h),u(t)}function u(t){t.children.forEach((function(t){if(0!=t.visible){if(t.pos&&r.translate(Math.round(t.pos.x),Math.round(t.pos.y)),t.anchor&&r.translate(t.anchor.x,t.anchor.y),t.scale&&r.scale(t.scale.x,t.scale.y),t.rotation){var n=t.pivot?t.pivot.x:0,c=t.pivot?t.pivot.y:0;r.translate(n,c),r.rotate(t.rotation),r.translate(-n,-c)}if(e.debug&&(r.textAlign="left",r.fillStyle="black",r.fillText("FPS: "+e.fps,-o/2,-i/2)),t.text){var a=t.style,l=a.font,f=a.fill,s=a.align;l&&(r.font=l),f&&(r.fillStyle=f),s&&(r.textAlign=s),r.fillText(t.text,0,0)}else if(t.texture){var h=t.texture.img;t.tileW&&r.drawImage(h,t.frame.x*t.tileW,t.frame.y*t.tileH,t.tileW,t.tileH,0,0,t.tileW,t.tileH)}else t.tileW&&(r.fillStyle="red",r.fillRect(t.pos.x*t.tileW*t.tileH,t.pos.y,t.tileW,t.tileH));t.children&&u(t),r.restore()}}))}}}])&&c(e.prototype,n),t}();function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(o){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function c(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return l(this,c),(e=i.call(this,"",n,r,o,o)).sleep=!o,e.key=t,e}return e=c,(n=[{key:"setSleep",value:function(t){this.sleep=t}}])&&f(e.prototype,n),c}(i);function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e.width,this.height=e.height,this.debug=e.debug,this.render=new u({width:this.width,height:this.height,backgroundColor:e.backgroundColor}),e.parent=e.parent||"game",document.querySelector(e.parent)||(document.body.innerHTML='<div id="'+e.parent+'"></div>'),document.getElementById(e.parent).appendChild(this.render.view),this.scenes=[],this.scene}var e,n;return e=t,(n=[{key:"addScene",value:function(t){return this.scenes.push(t),this.scene=t,t}},{key:"run",value:function(){var t=this,e=0,n=0,r=0;requestAnimationFrame((function o(i){requestAnimationFrame(o);var c=i/1e3;e=Math.min(c-n,.08333333333333333),n=c,r=Math.round(1/e),t.scenes.forEach((function(n){n.update(e,c),t.render.render(n,{debug:t.debug,fps:r})}))}))}}])&&b(e.prototype,n),t}();function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=O(e);if(n){var o=O(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return x(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return m(this,o),(t=r.call(this,"",n,null,c,c)).text=e,t.style=i,t}return o}(i);function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const _={Vector2:function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;j(this,t),this.x=e,this.y=n}var e,n;return e=t,(n=[{key:"add",value:function(e){return e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=e),this}},{key:"subtract",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiply",value:function(e){return e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=e),this}},{key:"normalize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.Length();return e>0?this.Multiply(t/e):this.Set(t,y=0)}},{key:"length",value:function(){return Math.hypot(this.x,this.y)}}])&&k(e.prototype,n),t}(),RGBA:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return"rgba(".concat(255*t|0,",").concat(255*e|0,",").concat(255*n|0,",").concat(r,")")},rand:function(t,e){return Math.floor(randf(t,e))}};function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}const R=function t(e,n){arguments.length>2&&void 0!==arguments[2]||RGBA(255,0,0,1),P(this,t),this.texture=e,this.pos=n,this.scale=new _.Vector2(1,1),this.pivot=new _.Vector2(0,0),this.rotation=0};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=M(e);if(n){var o=M(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return C(this,t)});function o(t,e,n,i,c,u){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(a=r.call(this)).mapW=e,a.mapH=n,a.tileW=i,a.tileH=c,a.w=e*i,a.h=n*c,a.type=t,a}return o}(i)}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}return n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(868)})()}));