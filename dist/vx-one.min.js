!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("vx",[],e):"object"==typeof exports?exports.vx=e():t.vx=e()}(window,function(){return r={},o.m=n=[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n.d(e,"GameObject",function(){return o}),n.d(e,"Render",function(){return u}),n.d(e,"Scene",function(){return h}),n.d(e,"TileMap",function(){return R}),n.d(e,"Game",function(){return d}),n.d(e,"Text",function(){return w}),n.d(e,"Sprite",function(){return S}),n.d(e,"math",function(){return O});var o=function(){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},n=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.name=t,this.size=n,this.pos=e,this.children=[],this.visible=r,this.active=o}var t,e,n;return t=i,(e=[{key:"add",value:function(t){return this.children.push(t),t}},{key:"remove",value:function(e){return this.children=this.children.filter(function(t){return t!==e}),e}},{key:"map",value:function(t){return this.children.map(t)}},{key:"update",value:function(e,n){var r=this;this.children=this.children.filter(function(t){return t.update&&t.update(e,n,r),!t.dead})}}])&&r(t.prototype,e),n&&r(t,n),i}();function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=document.createElement("canvas");this.width=e.width=t.width,this.height=e.height=t.height,this.view=e,this.ctx=e.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.ctx.textBaseline="top",this.backgroundColor=t.backgroundColor}var t,e,r;return t=n,(e=[{key:"render",value:function(t,f,e){var l,s,h,n,r=!(2<arguments.length&&void 0!==e)||e;0!=t.active&&(l=this.ctx,s=this.width,h=this.height,n=this.backgroundColor,l.save(),l.fillStyle=n||"black",l.fillRect(0,0,s,h),r&&l.clearRect(0,0,this.w,this.h),function a(t){t.children.forEach(function(t){var e,n,r,o,i,u,c;0!=t.visible&&(t.pos&&l.translate(Math.round(t.pos.x),Math.round(t.pos.y)),t.anchor&&l.translate(t.anchor.x,t.anchor.y),t.scale&&l.scale(t.scale.x,t.scale.y),t.rotation&&(e=t.pivot?t.pivot.x:0,n=t.pivot?t.pivot.y:0,l.translate(e,n),l.rotate(t.rotation),l.translate(-e,-n)),f.debug&&(l.textAlign="left",l.fillStyle="black",l.fillText("FPS: "+f.fps,-s/2,-h/2)),t.text?(o=(r=t.style).font,i=r.fill,u=r.align,o&&(l.font=o),i&&(l.fillStyle=i),u&&(l.textAlign=u),l.fillText(t.text,0,0)):t.texture?(c=t.texture.img,t.tileW&&l.drawImage(c,t.frame.x*t.tileW,t.frame.y*t.tileH,t.tileW,t.tileH,0,0,t.tileW,t.tileH)):t.tileW&&(l.fillStyle="red",l.fillRect(t.pos.x*t.tileW*t.tileH,t.pos.y,t.tileW,t.tileH)),t.children&&a(t),l.restore())})}(t))}}])&&i(t.prototype,e),r&&i(t,r),n}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(i){var u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,r,o=s(i);return e=u?(t=s(this).constructor,Reflect.construct(o,arguments,t)):o.apply(this,arguments),n=this,!(r=e)||"object"!==c(r)&&"function"!=typeof r?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(u,o);var t,e,n,i=l(u);function u(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,"",n,r,o,o)).sleep=!o,e.key=t,e}return t=u,(e=[{key:"setSleep",value:function(t){this.sleep=t}}])&&a(t.prototype,e),n&&a(t,n),u}();function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=t.width,this.height=t.height,this.debug=t.debug,this.render=new u({width:this.width,height:this.height,backgroundColor:t.backgroundColor}),t.parent=t.parent||"game",document.querySelector(t.parent)||(document.body.innerHTML='<div id="'+t.parent+'"></div>'),document.getElementById(t.parent).appendChild(this.render.view),this.scenes=[],this.scene}var t,n,r;return t=e,(n=[{key:"addScene",value:function(t){return this.scenes.push(t),this.scene=t}},{key:"run",value:function(){var r,o,i=this,u=0;requestAnimationFrame(function t(e){requestAnimationFrame(t);var n=e/1e3;r=Math.min(n-u,1/60*5),u=n,o=Math.round(1/r),i.scenes.forEach(function(t){t.update(r,n),i.render.render(t,{debug:i.debug,fps:o})})})}}])&&p(t.prototype,n),r&&p(t,r),e}();function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(i){var u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,r,o=m(i);return e=u?(t=m(this).constructor,Reflect.construct(o,arguments,t)):o.apply(this,arguments),n=this,!(r=e)||"object"!==v(r)&&"function"!=typeof r?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(u,o);var i=g(u);function u(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"",n,null,o,o)).text=e,t.style=r,t}return u}();function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var O={Vector2:function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=t,this.y=e}var t,e,r;return t=n,(e=[{key:"add",value:function(t){return t instanceof n?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=t),this}},{key:"subtract",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiply",value:function(t){return t instanceof n?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t),this}},{key:"normalize",value:function(t){var e=0<arguments.length&&void 0!==t?t:1,n=this.Length();return 0<n?this.Multiply(e/n):this.Set(e,y=0)}},{key:"length",value:function(){return Math.hypot(this.x,this.y)}}])&&x(t.prototype,e),r&&x(t,r),n}(),RGBA:function(t,e,n,r){var o=1<arguments.length&&void 0!==e?e:0,i=2<arguments.length&&void 0!==n?n:0,u=3<arguments.length&&void 0!==r?r:1;return"rgba(".concat(255*(0<arguments.length&&void 0!==t?t:0)|0,",").concat(255*o|0,",").concat(255*i|0,",").concat(u,")")},rand:function(t,e){return Math.floor(randf(t,e))}};var S=function t(e,n){2<arguments.length&&void 0!==arguments[2]||RGBA(255,0,0,1);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.texture=e,this.pos=n,this.scale=new O.Vector2(1,1),this.pivot=new O.Vector2(0,0),this.rotation=0};function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(i){var u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,r,o=P(i);return e=u?(t=P(this).constructor,Reflect.construct(o,arguments,t)):o.apply(this,arguments),n=this,!(r=e)||"object"!==j(r)&&"function"!=typeof r?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(a,o);var c=k(a);function a(t,e,n,r,o,i){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(u=c.call(this)).mapW=e,u.mapH=n,u.tileW=r,u.tileH=o,u.w=e*r,u.h=n*o,u.type=t,u}return a}()}],o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0);function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var n,r});