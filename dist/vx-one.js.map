{"version":3,"sources":["webpack://vx/webpack/universalModuleDefinition","webpack://vx/./src/AnimManager.js","webpack://vx/./src/Camera.js","webpack://vx/./src/Constants.js","webpack://vx/./src/Container.js","webpack://vx/./src/Debug.js","webpack://vx/./src/Game.js","webpack://vx/./src/GameObject.js","webpack://vx/./src/Inputs.js","webpack://vx/./src/Renderer.js","webpack://vx/./src/Scene.js","webpack://vx/./src/Sprite.js","webpack://vx/./src/Text.js","webpack://vx/./src/Texture.js","webpack://vx/./src/TileMap.js","webpack://vx/./src/utils.js","webpack://vx/./src/vx-one.js","webpack://vx/webpack/bootstrap","webpack://vx/webpack/runtime/define property getters","webpack://vx/webpack/runtime/hasOwnProperty shorthand","webpack://vx/webpack/runtime/make namespace object","webpack://vx/webpack/startup"],"names":["Anim","frames","rate","reset","frame","curFrame","curTime","dt","length","AnimManager","e","x","y","anims","running","frameSource","current","name","speed","anim","update","Camera","subject","viewport","worldSize","w","h","setSubject","pos","offset","anchor","focus","centeredX","maxX","math","centeredY","maxY","t","Container","step","MAX_FRAME","Scale","RESIZE","NONE","children","filter","child","dead","push","c","f","map","Debug","active","fpsTxt","Text","style","font","fill","align","add","Game","config","width","height","renderer","createRenderer","scenes","scene","controls","KeyControls","debug","debugMode","gameUpdate","last","fps","mainloop","ms","requestAnimationFrame","Math","min","round","find","text","render","Renderer","parent","el","document","querySelector","body","innerHTML","getElementById","appendChild","view","GameObject","scale","pivot","rotation","visible","zIndex","keys","addEventListener","indexOf","which","preventDefault","keyCode","key","value","undefined","MouseControls","container","isDown","pressed","released","down","up","move","clientX","clientY","rect","getBoundingClientRect","xr","clientWidth","yr","clientHeight","left","top","mousePosFromEvent","Render","canvas","createElement","ctx","getContext","textBaseline","backgroundColor","pixel","imageRendering","imageSmoothingEnabled","clear","renderRec","forEach","save","translate","px","py","rotate","fillStyle","textAlign","fillText","texture","Sprite","img","tileW","drawImage","tileH","lines","clearRect","restore","Scene","abs","Texture","url","Image","src","TileMap","mapW","mapH","tiles","i","s","floor","Vector2","v","l","Length","Multiply","Set","hypot","RGBA","r","g","b","a","randf","max","random","rand","clamp"],"mappings":"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","file":"vx-one.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vx\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vx\"] = factory();\n\telse\n\t\troot[\"vx\"] = factory();\n})(self, function() {\nreturn ","class Anim {\n  constructor(frames, rate) {\n    this.frames = frames;\n    this.rate = rate;\n    this.reset();\n  }\n\n  reset() {\n    this.frame = this.frames[0];\n    this.curFrame = 0;\n    this.curTime = 0;\n  }\n\n  update(dt) {\n    const { rate, frames } = this;\n    if ((this.curTime += dt) > rate) {\n      this.curFrame++;\n      this.frame = frames[this.curFrame % frames.length];\n      this.curTime -= rate;\n    }\n  }\n  \n}\n\nclass AnimManager {\n  constructor(e = { x: 0, y: 0 }) {\n    this.anims = {};\n    this.running = false;\n    this.frameSource = e.frame || e;\n    this.current = null;\n  }\n\n  add(name, frames, speed) {\n    this.anims[name] = new Anim(frames, speed);\n    return this.anims[name];\n  }\n\n  update(dt) {\n    const { current, anims, frameSource } = this;\n    if (!current) {\n      return;\n    }\n    const anim = anims[current];\n    anim.update(dt);\n\n    // Sync the tileSprite frame\n    frameSource.x = anim.frame.x;\n    frameSource.y = anim.frame.y;\n  }\n\n  play(anim) {\n    const { current, anims } = this;\n    if (anim === current) {\n      return;\n    }\n    this.current = anim;\n    anims[anim].reset();\n  }\n\n  stop() {\n    this.current = null;\n  }\n}\n\nexport default AnimManager;\n","import Container from \"./Container.js\"\r\nimport math from \"./utils.js\"\r\n\r\nclass Camera extends Container {\r\n    constructor(subject, viewport, worldSize = viewport) {\r\n        super()\r\n        this.w = viewport.w\r\n        this.h = viewport.h\r\n        this.worldSize = worldSize\r\n        this.setSubject(subject)\r\n    }\r\n\r\n    setSubject(e) {\r\n        this.subject = e ? e.pos || e : this.pos\r\n        this.offset = { x: 0, y: 0 }\r\n\r\n        // Center on the entity\r\n        if (e && e.w) {\r\n            this.offset.x += e.w / 2\r\n            this.offset.y += e.h / 2\r\n        }\r\n        if (e && e.anchor) {\r\n            this.offset.x -= e.anchor.x\r\n            this.offset.y -= e.anchor.y\r\n        }\r\n        this.focus()\r\n    }\r\n\r\n    focus() {\r\n        const { pos, w, h, worldSize, subject, offset } = this\r\n\r\n        const centeredX = subject.x + offset.x - w / 2\r\n        const maxX = worldSize.w - w\r\n        const x = -math.clamp(centeredX, 0, maxX)\r\n\r\n        const centeredY = subject.y + offset.y - h / 2\r\n        const maxY = worldSize.h - h\r\n        const y = -math.clamp(centeredY, 0, maxY)\r\n\r\n        pos.x = x\r\n        pos.y = y\r\n    }\r\n\r\n    update(dt, t) {\r\n        super.update(dt, t)\r\n\r\n        if (this.subject) {\r\n            this.focus()\r\n        }\r\n    }\r\n}\r\n\r\nexport default Camera\r\n","const step = 1 / 60\r\nconst MAX_FRAME = step * 5\r\nconst Scale = {\r\n    RESIZE: 0,\r\n    NONE: 1\r\n}\r\n\r\nexport {\r\n    MAX_FRAME,\r\n    Scale\r\n}","class Container {\r\n\r\n  constructor() {\r\n    this.pos = { x: 0, y: 0 }\r\n    this.children = []\r\n  }\r\n\r\n  update(dt, t) {\r\n    this.children = this.children.filter(child => {\r\n      if (child.update) {\r\n        child.update(dt, t, this)\r\n      }\r\n      return child.dead ? false : true\r\n    })\r\n  }\r\n\r\n  add(child) {\r\n    this.children.push(child)\r\n    return child\r\n  }\r\n\r\n  remove(child) {\r\n    this.children = this.children.filter(c => c !== child)\r\n    return child\r\n  }\r\n\r\n  map(f) {\r\n    return this.children.map(f)\r\n  }\r\n\r\n}\r\n\r\nexport default Container\r\n","import Container from \"./Container.js\"\r\nimport Text from \"./Text.js\"\r\n\r\nclass Debug extends Container {\r\n    constructor() {\r\n        super()\r\n        this.active = false;\r\n        const fpsTxt = new Text('fps: ')\r\n        fpsTxt.name = 'fps'\r\n        fpsTxt.pos = { x: 5, y: 15 }\r\n        fpsTxt.style = { font: '16px Arial', fill: 'red', align: 'left' }\r\n        this.add(fpsTxt)\r\n    }\r\n}\r\n\r\nexport default Debug","import Renderer from \"./Renderer.js\"\r\nimport { KeyControls } from \"./Inputs.js\"\r\nimport { MAX_FRAME } from './Constants.js'\r\nimport Debug from \"./Debug.js\"\r\n\r\nclass Game {\r\n  constructor(config) {\r\n    this.width = config.width\r\n    this.height = config.height\r\n    this.renderer = this.createRenderer(config);\r\n    this.scenes = []\r\n    this.scene\r\n    this.controls = new KeyControls()\r\n    this.debug = new Debug();\r\n    this.debug.active = config.debugMode;\r\n  }\r\n\r\n  addScene(scene) {\r\n    this.scenes.push(scene)\r\n    this.scene = scene\r\n    this.scene.controls = this.controls;\r\n    return scene\r\n  }\r\n\r\n  run(gameUpdate = () => { }) {\r\n\r\n    if (this.debug.active) {\r\n      this.scene.add(this.debug)\r\n    }\r\n\r\n    let dt = 0\r\n    let last = 0\r\n    let fps = 0\r\n\r\n    const mainloop = ms => {\r\n      requestAnimationFrame(mainloop)\r\n      // create delta\r\n      const t = ms / 1000\r\n      dt = Math.min(t - last, MAX_FRAME)\r\n      last = t\r\n      fps = Math.round(1 / dt)\r\n      if (this.debug.active)\r\n        this.scene.children.find(child => child instanceof Debug).children.find(c => c.name === \"fps\").text = 'fps: ' + fps\r\n\r\n      this.scene.update(dt, t)\r\n      gameUpdate(dt, t, this.controls)\r\n      this.renderer.render(this.scene)\r\n\r\n    }\r\n    requestAnimationFrame(mainloop)\r\n  }\r\n\r\n  createRenderer(config) {\r\n    const renderer = new Renderer(config)\r\n    const parent = config.parent || \"game\"\r\n    let el = document.querySelector(config.parent)\r\n    if (!el) {\r\n      document.body.innerHTML = '<div id=\"' + parent + '\"></div>'\r\n    }\r\n    document.getElementById(parent).appendChild(renderer.view)\r\n    return renderer;\r\n  }\r\n}\r\n\r\nexport default Game","import Container from \"./Container.js\"\r\nclass GameObject {\r\n  constructor(name = null) {\r\n    this.name = name\r\n    this.pos = { x: 0, y: 0 }\r\n    this.scale = { x: 1, y: 1 }\r\n    this.anchor = { x: 0, y: 0 }\r\n    this.pivot = { x: 0, y: 0 }\r\n    this.rotation = 0\r\n    this.visible = true\r\n    this.zIndex = 1\r\n  }\r\n}\r\n\r\nexport default GameObject","class KeyControls {\r\n    constructor() {\r\n        this.keys = {}\r\n        document.addEventListener(\"keydown\", e => {\r\n            // Check is a trick to stop the browser scrolling if the game is embedded in a web page that has scrollbars\r\n            if ([37, 38, 39, 40, 32].indexOf(e.which) >= 0) {\r\n                e.preventDefault()\r\n            }\r\n            this.keys[e.keyCode] = true\r\n        }, false)\r\n\r\n        document.addEventListener(\"keyup\", e => {\r\n            this.keys[e.which] = false\r\n        }, false)\r\n    }\r\n\r\n    key(key, value) {\r\n        if (value !== undefined) {\r\n            this.keys[key] = value\r\n        }\r\n        return this.keys[key]\r\n    }\r\n\r\n    reset() {\r\n        for (let key in this.keys) {\r\n            this.keys[key] = false\r\n        }\r\n    }\r\n\r\n    // Handle key actions\r\n    get action() {\r\n        return this.keys[32]\r\n    }\r\n\r\n    get x() {\r\n        // left arrow or A key\r\n        if (this.keys[37] || this.keys[65]) {\r\n            return -1\r\n        }\r\n        // right arrow or D key\r\n        if (this.keys[39] || this.keys[68]) {\r\n            return 1\r\n        }\r\n        return 0\r\n    }\r\n\r\n    get y() {\r\n        // up arrow or W key\r\n        if (this.keys[38] || this.keys[87]) {\r\n            return -1\r\n        }\r\n        // down arrow or S key\r\n        if (this.keys[40] || this.keys[83]) {\r\n            return 1\r\n        }\r\n        return 0\r\n    }\r\n}\r\n\r\nclass MouseControls {\r\n    constructor(container) {\r\n        this.el = container || document.body\r\n\r\n        this.pos = { x: 0, y: 0 }\r\n        this.isDown = false\r\n        this.pressed = false\r\n        this.released = false\r\n\r\n        // Handlers\r\n        document.addEventListener(\"mousedown\", e => this.down(e), false)\r\n        document.addEventListener(\"mouseup\", e => this.up(e), false)\r\n        document.addEventListener(\"mousemove\", e => this.move(e), false)\r\n    }\r\n\r\n    mousePosFromEvent({ clientX, clientY }) {\r\n        const { el, pos } = this\r\n        const rect = el.getBoundingClientRect()\r\n        const xr = el.width / el.clientWidth\r\n        const yr = el.height / el.clientHeight\r\n        pos.x = (clientX - rect.left) * xr\r\n        pos.y = (clientY - rect.top) * yr\r\n    }\r\n\r\n    down(e) {\r\n        this.isDown = true\r\n        this.pressed = true\r\n        this.mousePosFromEvent(e)\r\n    }\r\n\r\n    up() {\r\n        this.isDown = false\r\n        this.released = true\r\n    }\r\n\r\n    move(e) {\r\n        this.mousePosFromEvent(e)\r\n    }\r\n\r\n    update() {\r\n        this.released = false\r\n        this.pressed = false\r\n    }\r\n}\r\n\r\nexport {\r\n    KeyControls,\r\n    MouseControls\r\n}\r\n","import Sprite from \"./Sprite.js\"\r\nclass Render {\r\n\r\n    constructor(config) {\r\n        const canvas = document.createElement(\"canvas\")\r\n        this.view = canvas\r\n        this.ctx = canvas.getContext(\"2d\")\r\n        this.ctx.textBaseline = \"top\"\r\n        this.width = canvas.width = config.width\r\n        this.height = canvas.height = config.height\r\n        this.backgroundColor = config.backgroundColor || \"white\"\r\n        if (config.pixel) {\r\n            canvas.style.imageRendering = 'pixelated'\r\n            this.ctx.imageSmoothingEnabled = false\r\n        }\r\n    }\r\n\r\n    render(scene, clear = true) {\r\n        if (scene.active == false) {\r\n            return\r\n        }\r\n\r\n        const { ctx, width, height, backgroundColor } = this\r\n\r\n        function renderRec(scene) {\r\n            // Render the container children\r\n\r\n            scene.children.forEach(child => {\r\n                if (child.visible == false) {\r\n                    return\r\n                }\r\n                ctx.save()\r\n\r\n                // ctx.fillStyle = backgroundColor\r\n                // ctx.fillRect(0, 0, width, height)\r\n\r\n                // Handle transforms\r\n                if (child.pos) {\r\n                    ctx.translate(Math.round(child.pos.x), Math.round(child.pos.y))\r\n                }\r\n                if (child.anchor) {\r\n                    ctx.translate(child.anchor.x, child.anchor.y);\r\n                }\r\n                if (child.scale) {\r\n                    ctx.scale(child.scale.x, child.scale.y)\r\n                }\r\n                if (child.rotation) {\r\n                    const px = child.pivot ? child.pivot.x : 0;\r\n                    const py = child.pivot ? child.pivot.y : 0;\r\n                    ctx.translate(px, py);\r\n                    ctx.rotate(child.rotation);\r\n                    ctx.translate(-px, -py);\r\n                }\r\n\r\n                // Draw the leaf nodes\r\n                if (child.text) {\r\n                    const { font, fill, align } = child.style\r\n                    if (font) ctx.font = font\r\n                    if (fill) ctx.fillStyle = fill\r\n                    if (align) ctx.textAlign = align\r\n                    ctx.fillText(child.text, 0, 0)\r\n                } else if (child.texture && child instanceof Sprite) {\r\n                    const img = child.texture.img;\r\n                    if (child.tileW) {\r\n                        ctx.drawImage(\r\n                            img,\r\n                            child.frame.x * child.tileW,\r\n                            child.frame.y * child.tileH,\r\n                            child.tileW,\r\n                            child.tileH,\r\n                            0,\r\n                            0,\r\n                            child.tileW,\r\n                            child.tileH\r\n                        );\r\n                    } else {\r\n                        ctx.drawImage(img, 0, 0);\r\n                    }\r\n                } else if (child.lines) {\r\n                    ctx.clearRect(0, 0, width, height)\r\n                }\r\n\r\n                // Render any child sub-nodes\r\n                if (child.children) {\r\n                    renderRec(child)\r\n                }\r\n\r\n                ctx.restore()\r\n            })\r\n        }\r\n\r\n        if (clear) {\r\n            ctx.clearRect(0, 0, width, height)\r\n        }\r\n        renderRec(scene)\r\n    }\r\n}\r\n\r\nexport default Render","import Container from \"./Container.js\"\r\nclass Scene extends Container {\r\n  constructor(key, active = true) {\r\n    super()\r\n    this.key = key\r\n    this.children = []\r\n    this.active = active\r\n    this.controls\r\n  }\r\n}\r\n\r\nexport default Scene","import GameObject from \"./GameObject.js\"\r\nimport AnimManager from \"./AnimManager.js\"\r\n\r\nclass Sprite extends GameObject {\r\n    constructor(texture = null, w = 0, h = 0) {\r\n        super()\r\n        this.texture = texture\r\n        this.tileW = w\r\n        this.tileH = h\r\n        this.frame = { x: 0, y: 0 }\r\n        this.anims = new AnimManager(this)\r\n    }\r\n\r\n    update(dt) {\r\n        this.anims.update(dt)\r\n    }\r\n\r\n    get w() {\r\n        return this.tileW * Math.abs(this.scale.x)\r\n    }\r\n\r\n    get h() {\r\n        return this.tileH * Math.abs(this.scale.y)\r\n    }\r\n}\r\n\r\nexport default Sprite","import GameObject from \"./GameObject.js\"\r\n\r\nclass Text extends GameObject {\r\n  constructor(text = \"\") {\r\n    super()\r\n    this.text = text\r\n    this.style\r\n  }\r\n}\r\n\r\nexport default Text","class Texture {\r\n    constructor(url) {\r\n        this.img = new Image()\r\n        this.img.src = url\r\n    }\r\n}\r\n\r\nexport default Texture","import Container from \"./Container.js\";\nimport Sprite from \"./Sprite.js\";\n\nclass TileMap extends Container {\n  constructor(texture = null) {\n    super();\n    this.mapW\n    this.mapH\n    this.tileW\n    this.tileH\n    this.texture = texture\n    this.children = []\n  }\n\n  addTiles(tiles) {\n    // Add all tile sprites\n    this.children = tiles.map((frame, i) => {\n      const s = new Sprite()\n      s.frame = frame;\n      s.pos.x = i % this.mapW * this.tileW;\n      s.pos.y = Math.floor(i / this.mapW) * this.tileH;\n      s.tileW = this.tileW\n      s.tileH = this.tileH\n      s.texture = this.texture\n\n      return s;\n    });\n  }\n}\n\nexport default TileMap;\n","class Vector2 {\r\n    constructor(x = 0, y = 0) { this.x = x; this.y = y; }\r\n    add(v) {\r\n        (v instanceof Vector2) ? (this.x += v.x, this.y += v.y) : (this.x += v, this.y += v)\r\n        return this\r\n    }\r\n    subtract(v) {\r\n        (this.x -= v.x, this.y -= v.y)\r\n        return this\r\n    }\r\n    multiply(v) {\r\n        (v instanceof Vector2) ? (this.x *= v.x, this.y *= v.y) : (this.x *= v, this.y *= v)\r\n        return this\r\n    }\r\n    normalize(scale = 1) {\r\n        let l = this.Length()\r\n        return l > 0 ? this.Multiply(scale / l) : this.Set(scale, y = 0)\r\n    }\r\n    length() {\r\n        return Math.hypot(this.x, this.y)\r\n    }\r\n}\r\n\r\nconst RGBA = (r = 0, g = 0, b = 0, a = 1) => (`rgba(${r * 255 | 0},${g * 255 | 0},${b * 255 | 0},${a})`)\r\n\r\nfunction randf(min, max) {\r\n    if (max == null) {\r\n        max = min || 1;\r\n        min = 0;\r\n    }\r\n    return Math.random() * (max - min) + min;\r\n}\r\n\r\nfunction rand(min, max) {\r\n    return Math.floor(randf(min, max))\r\n}\r\nfunction clamp(x, min, max) {\r\n    return Math.max(min, Math.min(x, max));\r\n}\r\n\r\nexport default {\r\n    Vector2,\r\n    RGBA,\r\n    rand,\r\n    randf,\r\n    clamp\r\n}","import Scene from \"./Scene.js\"\r\nimport Game from \"./Game.js\"\r\nimport Text from \"./Text.js\"\r\nimport Sprite from \"./Sprite.js\"\r\nimport Texture from \"./Texture.js\"\r\nimport math from \"./utils.js\"\r\nimport Container from \"./Container.js\"\r\nimport TileMap from \"./TileMap.js\"\r\nimport Camera from \"./Camera.js\"\r\n\r\nexport {\r\n    Game,\r\n    Scene,\r\n    Text,\r\n    Sprite,\r\n    Texture,\r\n    math,\r\n    Container,\r\n    TileMap,\r\n    Camera\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./src/vx-one.js\");\n"],"sourceRoot":""}