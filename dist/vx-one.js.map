{"version":3,"sources":["webpack://vx/webpack/universalModuleDefinition","webpack://vx/./src/AnimManager.js","webpack://vx/./src/Camera.js","webpack://vx/./src/Constants.js","webpack://vx/./src/Container.js","webpack://vx/./src/Debug.js","webpack://vx/./src/Game.js","webpack://vx/./src/GameObject.js","webpack://vx/./src/Inputs.js","webpack://vx/./src/Rect.js","webpack://vx/./src/Renderer.js","webpack://vx/./src/Scene.js","webpack://vx/./src/Sprite.js","webpack://vx/./src/Text.js","webpack://vx/./src/TextureManager.js","webpack://vx/./src/TileMap.js","webpack://vx/./src/TileSprite.js","webpack://vx/./src/utils.js","webpack://vx/./src/vx-one.js","webpack://vx/./src/wallslide.js","webpack://vx/webpack/bootstrap","webpack://vx/webpack/runtime/define property getters","webpack://vx/webpack/runtime/hasOwnProperty shorthand","webpack://vx/webpack/runtime/make namespace object","webpack://vx/webpack/startup"],"names":["Anim","frames","rate","reset","frame","curFrame","curTime","dt","length","AnimManager","e","x","y","anims","running","frameSource","current","name","speed","anim","update","Camera","subject","viewport","worldSize","w","h","setSubject","pos","offset","anchor","focus","centeredX","maxX","math","centeredY","maxY","t","Container","Scale","NONE","RESIZE","State","LOADING","READY","RUNNING","SLEEPING","Graph","RECT","RECT_OUTLINE","children","filter","child","dead","push","c","f","map","Debug","active","fpsTxt","Text","style","font","fill","align","add","i","Rect","lineWidth","body","hb","Game","config","step","renderer","createRenderer","scenes","scene","textures","controls","KeyControls","mouse","MouseControls","view","debug","debugMode","sceneName","find","s","key","init","gameUpdate","MAX_FRAME","last","fps","mainloop","ms","requestAnimationFrame","Math","min","round","text","render","Renderer","parent","el","document","querySelector","innerHTML","getElementById","appendChild","GameObject","scale","pivot","rotation","visible","zIndex","keys","addEventListener","indexOf","which","preventDefault","keyCode","value","undefined","container","isDown","pressed","released","down","up","move","clientX","clientY","rect","getBoundingClientRect","xr","width","clientWidth","yr","height","clientHeight","left","top","mousePosFromEvent","type","Render","canvas","createElement","ctx","getContext","textBaseline","mode","pixel","checkIsPixelConfig","resizeCanvas","bind","window","clear","renderRec","isFirstNode","forEach","save","translate","innerWidth","innerHeight","px","py","rotate","fillStyle","textAlign","fillText","Sprite","TileSprite","img","texture","drawImage","fillRect","strokeStyle","strokeRect","restore","clearRect","imageRendering","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","imageSmoothingEnabled","Scene","isActive","state","entity","hitBox","hit","e1","e2","a","getBounds","b","hasAnim","flipped","origin","_y","abs","fx","fy","fxNo","flipAnchor","anchorX","scaleClone","TextureManager","urls","imgs","callback","p","loadImage","Promise","all","then","res","o","Object","assign","err","resolve","reject","Image","console","error","src","TileMap","mapW","mapH","tileW","tileH","tiles","floor","mapPos","tileAtMapPos","pixelToMapPos","tile","setFrameAtMapPos","bounds","xo","yo","tileAtPixelPos","randf","max","random","rand","clamp","randOneFrom","items","randOneIn","wallslide","ent","tileEdge","tilesAtCorners","rigid","tl","tr","bl","br"],"mappings":"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","file":"vx-one.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vx\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vx\"] = factory();\n\telse\n\t\troot[\"vx\"] = factory();\n})(self, function() {\nreturn ","class Anim {\r\n\r\n  constructor(frames, rate) {\r\n    this.frames = frames\r\n    this.rate = rate\r\n    this.reset()\r\n  }\r\n\r\n  reset() {\r\n    this.frame = this.frames[0];\r\n    this.curFrame = 0\r\n    this.curTime = 0\r\n  }\r\n\r\n  update(dt) {\r\n    const { rate, frames } = this;\r\n    if ((this.curTime += dt) > rate) {\r\n      this.curFrame++\r\n      this.frame = frames[this.curFrame % frames.length]\r\n      this.curTime -= rate\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass AnimManager {\r\n  constructor(e = { x: 0, y: 0 }) {\r\n    this.anims = {}\r\n    this.running = false\r\n    this.frameSource = e.frame || e\r\n    this.current = null\r\n  }\r\n\r\n  add(name, frames, speed) {\r\n    this.anims[name] = new Anim(frames, speed)\r\n    return this.anims[name]\r\n  }\r\n\r\n  update(dt) {\r\n    const { current, anims, frameSource } = this;\r\n    if (!current) {\r\n      return;\r\n    }\r\n    const anim = anims[current];\r\n    anim.update(dt);\r\n\r\n    // Sync the tileSprite frame\r\n    frameSource.x = anim.frame.x;\r\n    frameSource.y = anim.frame.y;\r\n  }\r\n\r\n  play(anim) {\r\n    const { current, anims } = this;\r\n    if (anim === current) {\r\n      return;\r\n    }\r\n    this.current = anim;\r\n    anims[anim].reset();\r\n  }\r\n\r\n  stop() {\r\n    this.current = null;\r\n  }\r\n}\r\n\r\nexport default AnimManager;\r\n","import Container from \"./Container.js\"\r\nimport math from \"./utils.js\"\r\n\r\nclass Camera extends Container {\r\n    constructor(subject, viewport, worldSize = viewport) {\r\n        super()\r\n        this.w = viewport.w\r\n        this.h = viewport.h\r\n        this.worldSize = worldSize\r\n        this.setSubject(subject)\r\n    }\r\n\r\n    setSubject(e) {\r\n        this.subject = e ? e.pos || e : this.pos\r\n        this.offset = { x: 0, y: 0 }\r\n\r\n        // Center on the entity\r\n        if (e && e.frame.w) {\r\n            this.offset.x += e.frame.w / 2\r\n            this.offset.y += e.frame.h / 2\r\n        }\r\n        if (e && e.anchor) {\r\n            this.offset.x -= e.anchor.x\r\n            this.offset.y -= e.anchor.y\r\n        }\r\n        this.focus()\r\n    }\r\n\r\n    focus() {\r\n        const { pos, w, h, worldSize, subject, offset } = this\r\n\r\n        const centeredX = subject.x + offset.x - (w / 2)\r\n        const maxX = worldSize.w - w\r\n        const x = -math.clamp(centeredX, 0, maxX)\r\n\r\n        const centeredY = subject.y + offset.y - h / 2\r\n        const maxY = worldSize.h - h\r\n        const y = -math.clamp(centeredY, 0, maxY)\r\n\r\n        pos.x = x\r\n        pos.y = y\r\n    }\r\n\r\n    update(dt, t) {\r\n        super.update(dt, t)\r\n\r\n        if (this.subject) {\r\n            this.focus()\r\n        }\r\n    }\r\n}\r\n\r\nexport default Camera\r\n","const Scale = {\r\n    NONE: 0,\r\n    RESIZE: 1\r\n}\r\n\r\nconst State = {\r\n    NONE: 0,\r\n    LOADING: 1,\r\n    READY: 2,\r\n    RUNNING: 3,\r\n    SLEEPING: 4\r\n}\r\n\r\nconst Graph = {\r\n    RECT: 0,\r\n    RECT_OUTLINE: 1\r\n}\r\n\r\nexport {\r\n    Scale,\r\n    State,\r\n    Graph\r\n}","class Container {\r\n\r\n  constructor() {\r\n    this.pos = { x: 0, y: 0 }\r\n    this.children = []\r\n  }\r\n\r\n  update(dt, t) {\r\n    this.children = this.children.filter(child => {\r\n      if (child.update) {\r\n        child.update(dt, t, this)\r\n      }\r\n      return child.dead ? false : true\r\n    })\r\n  }\r\n\r\n  add(child) {\r\n    this.children.push(child)\r\n    return child\r\n  }\r\n\r\n  remove(child) {\r\n    this.children = this.children.filter(c => c !== child)\r\n    return child\r\n  }\r\n\r\n  map(f) {\r\n    return this.children.map(f)\r\n  }\r\n\r\n}\r\n\r\nexport default Container\r\n","import Container from \"./Container.js\"\r\nimport Text from \"./Text.js\"\r\nimport Rect from \"./Rect.js\"\r\nimport { Graph } from \"./Constants.js\"\r\n\r\nclass Debug extends Container {\r\n    constructor() {\r\n        super()\r\n        this.active = false\r\n        const fpsTxt = new Text('fps: ')\r\n        fpsTxt.name = 'fps'\r\n        fpsTxt.pos = { x: 5, y: 15 }\r\n        fpsTxt.style = { font: '16px Arial', fill: 'red', align: 'left' }\r\n        this.add(fpsTxt)\r\n    }\r\n\r\n    // addDebug(e) {\r\n    //     e.children = e.children || []\r\n    //     const i = new Rect(Graph.RECT_OUTLINE)\r\n    //     i.w = e.frame.w\r\n    //     i.h = e.frame.h\r\n    //     i.style = { fill: 'cyan', lineWidth: 1 }\r\n    //     e.children.push(i)\r\n    //     if (e.hitBox) {\r\n    //         const { x, y, w, h } = e.hitBox;\r\n    //         const hb = new Rect(Graph.RECT_OUTLINE)\r\n    //         hb.style = { fill: 'rgba(255, 0, 0, 0.5)' }\r\n    //         hb.name = \"hb\"\r\n    //         hb.w = w\r\n    //         hb.h = h\r\n    //         hb.pos = { x, y }\r\n    //         e.children.push(hb);\r\n    //     }\r\n    // }\r\n    addDebug(e) {\r\n        e.children = e.children || []\r\n        const i = new Rect(Graph.RECT_OUTLINE)\r\n        i.w = e.frame.w\r\n        i.h = e.frame.h\r\n        i.style = { fill: 'cyan', lineWidth: 1 }\r\n        e.children.push(i)\r\n        if (e.body) {\r\n            const { x, y, w, h } = e.body\r\n            const hb = new Rect(Graph.RECT_OUTLINE)\r\n            hb.style = { fill: 'rgba(255, 0, 0, 1)' }\r\n            hb.name = \"hb\"\r\n            hb.w = w\r\n            hb.h = h\r\n            hb.pos = { x, y }\r\n            e.children.push(hb);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Debug","import Renderer from \"./Renderer.js\"\r\nimport { KeyControls, MouseControls } from \"./Inputs.js\"\r\nimport Debug from \"./Debug.js\"\r\n\r\nclass Game {\r\n\r\n  step = 1 / 60\r\n  MAX_FRAME = this.step * 5\r\n\r\n  constructor(config) {\r\n    this.w = config.w\r\n    this.h = config.h\r\n    this.renderer = this.createRenderer(config)\r\n    this.scenes = []\r\n    this.scene\r\n    this.textures\r\n    this.controls = new KeyControls()\r\n    this.mouse = new MouseControls(this.renderer.view)\r\n    this.debug = new Debug()\r\n    this.debug.active = config.debugMode\r\n  }\r\n\r\n  addScene(scene) {\r\n    if (this.debug.active)\r\n      scene.add(this.debug)\r\n\r\n    if (!this.scene)\r\n      this.scene = scene\r\n\r\n    this.scenes.push(scene)\r\n  }\r\n\r\n  launchScene(sceneName) {\r\n    this.scene = this.scenes.find(s => s.key === sceneName)\r\n    this.scene.init()\r\n  }\r\n\r\n  run(gameUpdate = () => { }) {\r\n    const { MAX_FRAME } = this\r\n    let dt = 0\r\n    let last = 0\r\n    let fps = 0\r\n\r\n    const mainloop = ms => {\r\n      requestAnimationFrame(mainloop)\r\n      // create delta\r\n      const t = ms / 1000\r\n      dt = Math.min(t - last, MAX_FRAME)\r\n      last = t\r\n      fps = Math.round(1 / dt)\r\n\r\n      if (!this.scene && this.debug.active)\r\n        return\r\n\r\n      if (this.debug.active)\r\n        this.scene.children.find(child => child instanceof Debug).children.find(c => c.name === \"fps\").text = 'fps-: ' + fps\r\n\r\n      this.scene.update(dt, t)\r\n      gameUpdate(dt, t, this.controls)\r\n      this.renderer.render(this.scene)\r\n\r\n    }\r\n    requestAnimationFrame(mainloop)\r\n  }\r\n\r\n  createRenderer(config) {\r\n    const renderer = new Renderer(config)\r\n    const parent = config.parent || \"game\"\r\n    let el = document.querySelector(config.parent)\r\n    if (!el) {\r\n      document.body.innerHTML = '<div id=\"' + parent + '\"></div>'\r\n    }\r\n    document.getElementById(parent).appendChild(renderer.view)\r\n    return renderer;\r\n  }\r\n}\r\n\r\nexport default Game","class GameObject {\r\n  constructor(name = null) {\r\n    this.name = name\r\n    this.pos = { x: 0, y: 0 }\r\n    this.scale = { x: 1, y: 1 }\r\n    this.anchor = { x: 0, y: 0 }\r\n    this.pivot = { x: 0, y: 0 }\r\n    this.rotation = 0\r\n    this.visible = true\r\n    this.zIndex = 1\r\n  }\r\n}\r\n\r\nexport default GameObject","class KeyControls {\r\n    constructor() {\r\n        this.keys = {}\r\n        document.addEventListener(\"keydown\", e => {\r\n            // Check is a trick to stop the browser scrolling if the game is embedded in a web page that has scrollbars\r\n            if ([37, 38, 39, 40, 32].indexOf(e.which) >= 0) {\r\n                e.preventDefault()\r\n            }\r\n            this.keys[e.keyCode] = true\r\n        }, false)\r\n\r\n        document.addEventListener(\"keyup\", e => {\r\n            this.keys[e.which] = false\r\n        }, false)\r\n    }\r\n\r\n    key(key, value) {\r\n        if (value !== undefined) {\r\n            this.keys[key] = value\r\n        }\r\n        return this.keys[key]\r\n    }\r\n\r\n    reset() {\r\n        for (let key in this.keys) {\r\n            this.keys[key] = false\r\n        }\r\n    }\r\n\r\n    // Handle key actions\r\n    get action() {\r\n        return this.keys[32]\r\n    }\r\n\r\n    get x() {\r\n        // left arrow or A key\r\n        if (this.keys[37] || this.keys[65]) {\r\n            return -1\r\n        }\r\n        // right arrow or D key\r\n        if (this.keys[39] || this.keys[68]) {\r\n            return 1\r\n        }\r\n        return 0\r\n    }\r\n\r\n    get y() {\r\n        // up arrow or W key\r\n        if (this.keys[38] || this.keys[87]) {\r\n            return -1\r\n        }\r\n        // down arrow or S key\r\n        if (this.keys[40] || this.keys[83]) {\r\n            return 1\r\n        }\r\n        return 0\r\n    }\r\n}\r\n\r\nclass MouseControls {\r\n    constructor(container) {\r\n        this.el = container || document.body;\r\n\r\n        this.pos = { x: 0, y: 0 };\r\n        this.isDown = false;\r\n        this.pressed = false;\r\n        this.released = false;\r\n\r\n        // Handlers\r\n        document.addEventListener(\"mousedown\", e => this.down(e), false);\r\n        document.addEventListener(\"mouseup\", e => this.up(e), false);\r\n        document.addEventListener(\"mousemove\", e => this.move(e), false);\r\n    }\r\n\r\n    mousePosFromEvent({ clientX, clientY }) {\r\n        const { el, pos } = this\r\n        const rect = el.getBoundingClientRect()\r\n        const xr = el.width / el.clientWidth\r\n        const yr = el.height / el.clientHeight\r\n        pos.x = (clientX - rect.left) * xr\r\n        pos.y = (clientY - rect.top) * yr\r\n    }\r\n\r\n    down(e) {\r\n        this.isDown = true\r\n        this.pressed = true\r\n        this.mousePosFromEvent(e)\r\n    }\r\n\r\n    up() {\r\n        this.isDown = false\r\n        this.released = true\r\n    }\r\n\r\n    move(e) {\r\n        this.mousePosFromEvent(e)\r\n    }\r\n\r\n    update() {\r\n        this.released = false\r\n        this.pressed = false\r\n    }\r\n}\r\n\r\nexport {\r\n    KeyControls,\r\n    MouseControls\r\n}\r\n","import GameObject from \"./GameObject.js\"\r\nimport { Graph } from \"./Constants.js\"\r\n\r\nclass Rect extends GameObject {\r\n    constructor(type = Graph.RECT) {\r\n        super()\r\n        this.type = type\r\n        this.w \r\n        this.h \r\n        this.style \r\n    }\r\n}\r\n\r\nexport default Rect","import Sprite from \"./Sprite.js\"\r\nimport TileSprite from \"./TileSprite.js\"\r\nimport { Graph, Scale } from './Constants.js'\r\nimport Rect from \"./Rect.js\"\r\n\r\nclass Render {\r\n\r\n    constructor(config) {\r\n        const canvas = document.createElement(\"canvas\")\r\n        this.view = canvas\r\n        this.ctx = canvas.getContext(\"2d\")\r\n        this.ctx.textBaseline = \"top\"\r\n        this.mode = config.mode\r\n        this.w = this.view.width = config.w\r\n        this.h = this.view.height = config.h\r\n        this.pixel = config.pixel\r\n        this.checkIsPixelConfig()\r\n        if (this.mode === Scale.RESIZE) {\r\n            const resizeCanvas = this.resizeCanvas.bind(this)\r\n            resizeCanvas()\r\n            window.addEventListener('resize', resizeCanvas, false)\r\n        }\r\n    }\r\n\r\n    render(scene, clear = true) {\r\n        if (scene.active == false) {\r\n            return\r\n        }\r\n\r\n        const { ctx, w, h, mode } = this\r\n\r\n        function renderRec(scene, isFirstNode = true) {\r\n            // Render the container children\r\n            scene.children.forEach(child => {\r\n                if (child.visible == false) {\r\n                    return\r\n                }\r\n                ctx.save()\r\n\r\n                // Handle resize\r\n                if (mode === Scale.RESIZE && isFirstNode) {\r\n                    ctx.translate(Math.round(scene.pos.x), Math.round(scene.pos.y))\r\n                    // TO DO: Improve this\r\n\r\n                    if (w > window.innerWidth && h < window.innerHeight) {\r\n                        ctx.scale((window.innerWidth * 100 / w) / 100, (window.innerWidth * 100 / w) / 100)\r\n                    } else if (h > window.innerHeight && w < window.innerWidth) {\r\n                        ctx.scale((window.innerHeight * 100 / h) / 100, (window.innerHeight * 100 / h) / 100)\r\n                    } else if (w > window.innerWidth && h > window.innerHeight) {\r\n                        if (window.innerWidth > window.innerHeight)\r\n                            ctx.scale((window.innerHeight * 100 / h) / 100, (window.innerHeight * 100 / h) / 100)\r\n                        else\r\n                            ctx.scale((window.innerWidth * 100 / w) / 100, (window.innerWidth * 100 / w) / 100)\r\n                    } else if (window.innerHeight > h) {\r\n                        ctx.scale((window.innerHeight * 100 / h) / 100, (window.innerHeight * 100 / h) / 100)\r\n                    }\r\n                }\r\n\r\n                // Handle transforms\r\n                if (child.pos) {\r\n                    ctx.translate(Math.round(child.pos.x), Math.round(child.pos.y))\r\n                }\r\n                if (child.anchor) {\r\n                    ctx.translate(child.anchor.x, child.anchor.y);\r\n                }\r\n                if (child.scale) {\r\n                    ctx.scale(child.scale.x, child.scale.y)\r\n                }\r\n                if (child.rotation) {\r\n                    const px = child.pivot ? child.pivot.x : 0\r\n                    const py = child.pivot ? child.pivot.y : 0\r\n                    ctx.translate(px, py)\r\n                    ctx.rotate(child.rotation)\r\n                    ctx.translate(-px, -py)\r\n                }\r\n\r\n                // Draw the leaf nodes\r\n                if (child.text) {\r\n                    const { font, fill, align } = child.style\r\n                    if (font) ctx.font = font\r\n                    if (fill) ctx.fillStyle = fill\r\n                    if (align) ctx.textAlign = align\r\n                    ctx.fillText(child.text, 0, 0)\r\n                } else if (child instanceof Sprite || child instanceof TileSprite) {\r\n                    const img = child.texture\r\n                    if (child.frame) {\r\n                        ctx.drawImage(\r\n                            img,\r\n                            child.frame.x * child.frame.w,\r\n                            child.frame.y * child.frame.h,\r\n                            child.frame.w,\r\n                            child.frame.h,\r\n                            0,\r\n                            0,\r\n                            child.frame.w,\r\n                            child.frame.h\r\n                        );\r\n                    } else {\r\n                        ctx.drawImage(img, 0, 0);\r\n                    }\r\n                } else if (child instanceof Rect) {\r\n                    if (child.type === Graph.RECT) {\r\n                        const { fill } = child.style\r\n                        ctx.fillStyle = fill;\r\n                        ctx.fillRect(0, 0, child.w, child.h);\r\n                    } else if (child.type === Graph.RECT_OUTLINE) {\r\n                        const { fill, lineWidth } = child.style\r\n                        ctx.strokeStyle = fill;\r\n                        ctx.lineWidth = lineWidth\r\n                        ctx.strokeRect(0, 0, child.w, child.h);\r\n                    }\r\n                }\r\n\r\n                // Render any child sub-nodes\r\n                if (child.children) {\r\n                    renderRec(child, false)\r\n                }\r\n\r\n                ctx.restore()\r\n            })\r\n        }\r\n\r\n        if (clear) {\r\n            ctx.clearRect(0, 0, w, h)\r\n        }\r\n        renderRec(scene)\r\n    }\r\n\r\n    resizeCanvas() {\r\n        this.view.width = window.innerWidth\r\n        this.view.height = window.innerHeight\r\n        this.checkIsPixelConfig();\r\n\r\n    }\r\n\r\n    checkIsPixelConfig() {\r\n        if (this.pixel) {\r\n            this.view.style.imageRendering = 'pixelated'\r\n            this.ctx.webkitImageSmoothingEnabled = false\r\n            this.ctx.mozImageSmoothingEnabled = false\r\n            this.ctx.imageSmoothingEnabled = false\r\n        }\r\n    }\r\n}\r\n\r\nexport default Render\r\n\r\n","import Container from \"./Container.js\"\r\nimport { State } from './Constants.js'\r\n\r\nclass Scene extends Container {\r\n  constructor(key, isActive = false) {\r\n    super()\r\n    this.key = key\r\n    this.active = isActive\r\n    this.state = State.NONE\r\n    this.controls\r\n  }\r\n\r\n  getBounds(entity) {\r\n    const { hitBox, pos } = entity\r\n    const hit = hitBox\r\n    \r\n    return {\r\n      x: hit.x + pos.x,\r\n      y: hit.y + pos.y,\r\n      w: hit.w - 1,\r\n      h: hit.h - 1\r\n    }\r\n  }\r\n\r\n  isOvelapping(e1, e2) {\r\n    const a = this.getBounds(e1)\r\n    const b = this.getBounds(e2)\r\n    return (\r\n      a.x <= b.x + b.w &&\r\n      a.x + a.w >= b.x &&\r\n      a.y <= b.y + b.h &&\r\n      a.y + a.h >= b.y\r\n    )\r\n  }\r\n}\r\n\r\nexport default Scene","import GameObject from \"./GameObject.js\"\r\nimport AnimManager from \"./AnimManager.js\"\r\nimport { flipAnchor } from './utils.js'\r\n\r\nclass Sprite extends GameObject {\r\n    constructor(texture = null, hasAnim = true) {\r\n        super()\r\n        this.texture = texture\r\n        this.flipped = { x: false, y: false }\r\n        this.body = {}\r\n        this.origin = { x: 0, y: 0 }\r\n        if (hasAnim) {\r\n            this.frame = { x: 0, y: 0, w: texture.width, h: texture.height }\r\n            this.anims = new AnimManager(this)\r\n        }\r\n    }\r\n\r\n    set hitBox({ x, y, w, h }) {\r\n        this.body = { x, y, w, h }\r\n    }\r\n\r\n    get hitBox() {\r\n        const { anchor, body, scale, frame, flipped, origin } = this\r\n        let x, y\r\n        x = Math.abs(body.x * scale.x)\r\n        y = Math.abs(body.y * scale.y)\r\n        let anchorX = anchor.x\r\n\r\n        if (origin.x === 0 || origin.x === 1) {\r\n            const scaleClone = { ...scale, x: Math.abs(scale.x) }\r\n            anchorX = flipAnchor(false, frame, scaleClone, origin)\r\n            x = x + anchorX\r\n        } else {\r\n            if (anchorX !== 0)\r\n                x = x + anchorX * (flipped.x ? -1 : 1)\r\n        }\r\n\r\n        if (anchor.y !== 0)\r\n            y = y + anchor.y\r\n\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            w: Math.abs(body.w * scale.x),\r\n            h: Math.abs(body.h * scale.y)\r\n        }\r\n    }\r\n\r\n    setOrigin(x, y) {\r\n        const { anchor, frame } = this\r\n        const _y = y || x\r\n        anchor.x = -(frame.w * x)\r\n        anchor.y = -(frame.h * _y)\r\n        this.origin = { x: x, y: _y }\r\n    }\r\n\r\n    setScale(x, y) {\r\n        const { scale, anchor } = this\r\n        const _y = y || x\r\n        scale.x = Math.abs(x)\r\n        scale.y = Math.abs(_y)\r\n        //fix anchor        \r\n        anchor.x = anchor.x * scale.x\r\n        anchor.y = anchor.y * scale.y\r\n    }\r\n\r\n    flip(fx, fy = false) {\r\n        const { scale, anchor, frame, origin } = this\r\n        this.flipped.x = fx\r\n        this.flipped.y = fy\r\n\r\n        const fxNo = fx ? -1 : 1\r\n\r\n        if (fx) {\r\n            scale.x = fxNo * Math.abs(scale.x)\r\n            if (origin.x === 0 || origin.x === 1)\r\n                anchor.x = flipAnchor(true, frame, scale, origin)\r\n        }\r\n        else {\r\n            scale.x = fxNo * Math.abs(scale.x)\r\n            if (origin.x === 0 || origin.x === 1)\r\n                anchor.x = flipAnchor(false, frame, scale, origin)\r\n        }\r\n        if (origin.x > 0 && origin.x < 1)\r\n            anchor.x = scale.x > 0 ? -Math.abs(anchor.x) : Math.abs(anchor.x)\r\n\r\n        // It needs to be improved, just works to flip x \r\n    }\r\n\r\n    update(dt) {\r\n        if (this.anims)\r\n            this.anims.update(dt)\r\n    }\r\n}\r\n\r\nexport default Sprite","import GameObject from \"./GameObject.js\"\r\n\r\nclass Text extends GameObject {\r\n  constructor(text = \"\") {\r\n    super()\r\n    this.text = text\r\n    this.style\r\n  }\r\n}\r\n\r\nexport default Text","class TextureManager {\r\n    constructor(urls) {\r\n        this.urls = urls\r\n        this.imgs = {}\r\n    }\r\n\r\n    load(callback) {\r\n        const p = this.urls.map(i => this.loadImage(i))\r\n        Promise.all(p)\r\n            .then(res => {\r\n                let o = this.imgs = Object.assign(...res)\r\n                return callback(null, o)\r\n            })\r\n            .catch(err => {\r\n                return callback(err)\r\n            })\r\n    }\r\n\r\n    loadImage(i) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new Image()\r\n            img.addEventListener('load', () => {\r\n                let o = { [i[0]]: img }\r\n                resolve(o)\r\n            })\r\n            img.addEventListener('error', () => {\r\n                console.error('Error when loading an image')\r\n                reject()\r\n            })\r\n            img.src = i[1]\r\n        })\r\n    }\r\n}\r\n\r\nexport default TextureManager","import Container from \"./Container.js\";\r\nimport TileSprite from \"./TileSprite.js\";\r\n\r\nclass TileMap extends Container {\r\n  constructor(texture = null) {\r\n    super();\r\n    this.mapW\r\n    this.mapH\r\n    this.tileW\r\n    this.tileH\r\n    this.texture = texture\r\n    this.children = []\r\n  }\r\n\r\n  addTiles(tiles, scale = 1) {\r\n    // Add all tile sprites\r\n    this.children = tiles.map((frame, i) => {\r\n      const s = new TileSprite(this.texture)\r\n      s.frame =\r\n      {\r\n        ...frame,\r\n        w: this.tileW,\r\n        h: this.tileH\r\n      }\r\n      s.scale = { x: scale, y: scale }\r\n      s.pos.x = i % this.mapW * this.tileW\r\n      s.pos.y = Math.floor(i / this.mapW) * this.tileH\r\n\r\n      return s;\r\n    });\r\n  }\r\n\r\n  pixelToMapPos(pos) {\r\n    const { tileW, tileH } = this\r\n    return {\r\n      x: Math.floor(pos.x / tileW),\r\n      y: Math.floor(pos.y / tileH)\r\n    };\r\n  }\r\n\r\n  mapToPixelPos(mapPos) {\r\n    const { tileW, tileH } = this;\r\n    return {\r\n      x: mapPos.x * tileW,\r\n      y: mapPos.y * tileH\r\n    };\r\n  }\r\n\r\n  tileAtMapPos(mapPos) {\r\n    return this.children[mapPos.y * this.mapW + mapPos.x];\r\n  }\r\n\r\n  tileAtPixelPos(pos) {\r\n    return this.tileAtMapPos(this.pixelToMapPos(pos));\r\n  }\r\n\r\n  setFrameAtMapPos(mapPos, frame) {\r\n    const tile = this.tileAtMapPos(mapPos);\r\n    tile.frame = frame;\r\n    return tile;\r\n  }\r\n\r\n  setFrameAtPixelPos(pos, frame) {\r\n    return this.setFrameAtMapPos(this.pixelToMapPos(pos), frame);\r\n  }\r\n\r\n  tilesAtCorners(bounds, xo = 0, yo = 0) {\r\n    return [\r\n      [bounds.x, bounds.y], // Top-left\r\n      [bounds.x + bounds.w, bounds.y], // Top-right\r\n      [bounds.x, bounds.y + bounds.h], // Bottom-left\r\n      [bounds.x + bounds.w, bounds.y + bounds.h] // Bottom-right\r\n    ].map(([x, y]) =>\r\n      this.tileAtPixelPos({\r\n        x: x + xo,\r\n        y: y + yo\r\n      })\r\n    );\r\n  }\r\n}\r\n\r\nexport default TileMap;\r\n","import GameObject from \"./GameObject.js\";\n\nclass TileSprite extends GameObject {\n  constructor(texture = null) {\n    super();\n    this.texture = texture\n    this.frame = { x: 0, y: 0, w: texture.width, h: texture.height }    \n  }\n\n  get w() {\n    return this.frame.w * Math.abs(this.scale.x);\n  }\n\n  get h() {\n    return this.frame.h * Math.abs(this.scale.y);\n  }\n}\n\nexport default TileSprite;\n","function randf(min, max) {\r\n    if (max == null) {\r\n        max = min || 1;\r\n        min = 0;\r\n    }\r\n    return Math.random() * (max - min) + min;\r\n}\r\n\r\nfunction rand(min, max) {\r\n    return Math.floor(randf(min, max))\r\n}\r\nfunction clamp(x, min, max) {\r\n    return Math.max(min, Math.min(x, max));\r\n}\r\n\r\nfunction randOneFrom(items) {\r\n    return items[rand(items.length)];\r\n}\r\n\r\nfunction randOneIn(max = 2) {\r\n    return rand(0, max) === 0;\r\n}\r\n\r\nfunction flipAnchor(flipped, frame, scale, origin) {\r\n    let anchor\r\n    if (flipped) {\r\n        if (origin.x === 0)\r\n            anchor = frame.w * Math.abs(scale.x)\r\n        else if (origin.x === 1)\r\n            anchor = 0\r\n    }\r\n    else {\r\n        if (origin.x === 0)\r\n            anchor = 0\r\n        else if (origin.x === 1)\r\n            anchor = -(frame.w * Math.abs(scale.x))\r\n    }\r\n    return anchor\r\n}\r\n\r\nexport default {\r\n    rand,\r\n    randf,\r\n    clamp,\r\n    randOneFrom,\r\n    randOneIn,\r\n}\r\n\r\nexport {\r\n    flipAnchor\r\n}","import Scene from \"./Scene.js\"\r\nimport Game from \"./Game.js\"\r\nimport Text from \"./Text.js\"\r\nimport Sprite from \"./Sprite.js\"\r\nimport TextureManager from \"./TextureManager.js\"\r\nimport Container from \"./Container.js\"\r\nimport TileMap from \"./TileMap.js\"\r\nimport Camera from \"./Camera.js\"\r\nimport  Rect  from \"./Rect.js\"\r\nimport { Scale, State, Graph } from \"./Constants.js\"\r\nimport math from \"./utils.js\"\r\nimport wallslide  from \"./wallslide.js\"\r\n\r\nexport {\r\n    Game,\r\n    Scene,\r\n    Text,\r\n    Sprite,\r\n    TextureManager,\r\n    Container,\r\n    TileMap,\r\n    Camera,\r\n    Rect,\r\n    Scale,\r\n    State,\r\n    Graph,\r\n    math,\r\n    wallslide\r\n}","function wallslide(ent, map, x = 0, y = 0) {\n  let tiles\n  let tileEdge\n\n  const { hitBox, pos } = ent\n  const hit = hitBox\n\n  const bounds = {\n    x: hit.x + pos.x,\n    y: hit.y + pos.y,\n    w: hit.w,\n    h: hit.h\n  }\n\n  // Final amounts of movement to allow\n  let xo = x\n  let yo = y\n\n  // Check vertical movement\n  if (y !== 0) {\n    tiles = map.tilesAtCorners(bounds, 0, yo)\n    const [tl, tr, bl, br] = tiles.map(t => t && t.frame.rigid)\n\n    // Hit your head\n    if (y < 0 && !(tl && tr)) {\n      tileEdge = tiles[0].pos.y + tiles[0].frame.h\n      yo = tileEdge - bounds.y + 1\n    }\n    // Hit your feet\n    if (y > 0 && !(bl && br)) {\n      tileEdge = tiles[2].pos.y - 1\n      yo = tileEdge - (bounds.y + bounds.h)\n    }\n  }\n\n  // Check horizontal movement\n  if (x !== 0) {\n    tiles = map.tilesAtCorners(bounds, xo, yo)\n    const [tl, tr, bl, br] = tiles.map(t => t && t.frame.rigid)\n\n    // Hit left edge\n    if (x < 0 && !(tl && bl)) {\n      tileEdge = tiles[0].pos.x + tiles[0].frame.w\n      xo = tileEdge - bounds.x + 1\n    }\n    // Hit right edge\n    if (x > 0 && !(tr && br)) {\n      tileEdge = tiles[1].pos.x - 1\n      xo = tileEdge - (bounds.x + bounds.w)\n    }\n  }\n  // xo & yo contain the amount we're allowed to move by.\n  return { x: xo, y: yo }\n}\n\nexport default wallslide\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./src/vx-one.js\");\n"],"sourceRoot":""}