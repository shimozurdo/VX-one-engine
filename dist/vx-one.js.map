{"version":3,"sources":["webpack://vx/webpack/universalModuleDefinition","webpack://vx/./src/AnimManager.js","webpack://vx/./src/Camera.js","webpack://vx/./src/Constants.js","webpack://vx/./src/Container.js","webpack://vx/./src/Debug.js","webpack://vx/./src/Game.js","webpack://vx/./src/GameObject.js","webpack://vx/./src/Graphics.js","webpack://vx/./src/Inputs.js","webpack://vx/./src/Renderer.js","webpack://vx/./src/Scene.js","webpack://vx/./src/Sprite.js","webpack://vx/./src/Text.js","webpack://vx/./src/TextureManager.js","webpack://vx/./src/TileMap.js","webpack://vx/./src/utils.js","webpack://vx/./src/vx-one.js","webpack://vx/webpack/bootstrap","webpack://vx/webpack/runtime/define property getters","webpack://vx/webpack/runtime/hasOwnProperty shorthand","webpack://vx/webpack/runtime/make namespace object","webpack://vx/webpack/startup"],"names":["Anim","frames","rate","reset","frame","curFrame","curTime","dt","length","AnimManager","e","x","y","anims","running","frameSource","current","name","speed","anim","update","Camera","subject","viewport","worldSize","w","h","setSubject","pos","offset","anchor","focus","centeredX","maxX","math","centeredY","maxY","t","Container","Scale","RESIZE","NONE","State","LOADING","READY","RUNNING","SLEEPING","Graph","ROUND_RECT","RECT","children","filter","child","dead","push","c","f","map","Debug","active","fpsTxt","Text","style","font","fill","align","add","Game","config","step","renderer","createRenderer","scenes","scene","textures","controls","KeyControls","debug","debugMode","sceneName","find","s","key","init","gameUpdate","MAX_FRAME","last","fps","mainloop","ms","requestAnimationFrame","Math","min","round","text","render","Renderer","parent","el","document","querySelector","body","innerHTML","getElementById","appendChild","view","GameObject","scale","pivot","rotation","visible","zIndex","Graphics","type","src","keys","addEventListener","indexOf","which","preventDefault","keyCode","value","undefined","MouseControls","container","isDown","pressed","released","down","up","move","clientX","clientY","rect","getBoundingClientRect","xr","width","clientWidth","yr","height","clientHeight","left","top","mousePosFromEvent","Render","canvas","createElement","ctx","getContext","textBaseline","pixel","imageRendering","imageSmoothingEnabled","clear","renderRec","forEach","save","translate","px","py","rotate","fillStyle","textAlign","fillText","Sprite","texture","img","tileW","drawImage","tileH","r","strokeStyle","beginPath","moveTo","arcTo","stroke","closePath","fillRect","restore","clearRect","Scene","isActive","state","abs","TextureManager","urls","imgs","callback","p","i","loadImage","Promise","all","then","res","o","Object","assign","err","resolve","reject","Image","console","error","TileMap","mapW","mapH","tiles","floor","Vector2","v","l","Length","Multiply","Set","hypot","RGBA","g","b","a","randf","max","random","rand","clamp"],"mappings":"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","file":"vx-one.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vx\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vx\"] = factory();\n\telse\n\t\troot[\"vx\"] = factory();\n})(self, function() {\nreturn ","class Anim {\r\n\r\n  constructor(frames, rate) {\r\n    this.frames = frames\r\n    this.rate = rate\r\n    this.reset()\r\n  }\r\n\r\n  reset() {\r\n    this.frame = this.frames[0];\r\n    this.curFrame = 0\r\n    this.curTime = 0\r\n  }\r\n\r\n  update(dt) {\r\n    const { rate, frames } = this;\r\n    if ((this.curTime += dt) > rate) {\r\n      this.curFrame++\r\n      this.frame = frames[this.curFrame % frames.length]\r\n      this.curTime -= rate\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass AnimManager {\r\n  constructor(e = { x: 0, y: 0 }) {\r\n    this.anims = {}\r\n    this.running = false\r\n    this.frameSource = e.frame || e\r\n    this.current = null\r\n  }\r\n\r\n  add(name, frames, speed) {\r\n    this.anims[name] = new Anim(frames, speed)\r\n    return this.anims[name]\r\n  }\r\n\r\n  update(dt) {\r\n    const { current, anims, frameSource } = this;\r\n    if (!current) {\r\n      return;\r\n    }\r\n    const anim = anims[current];\r\n    anim.update(dt);\r\n\r\n    // Sync the tileSprite frame\r\n    frameSource.x = anim.frame.x;\r\n    frameSource.y = anim.frame.y;\r\n  }\r\n\r\n  play(anim) {\r\n    const { current, anims } = this;\r\n    if (anim === current) {\r\n      return;\r\n    }\r\n    this.current = anim;\r\n    anims[anim].reset();\r\n  }\r\n\r\n  stop() {\r\n    this.current = null;\r\n  }\r\n}\r\n\r\nexport default AnimManager;\r\n","import Container from \"./Container.js\"\r\nimport math from \"./utils.js\"\r\n\r\nclass Camera extends Container {\r\n    constructor(subject, viewport, worldSize = viewport) {\r\n        super()\r\n        this.w = viewport.w\r\n        this.h = viewport.h\r\n        this.worldSize = worldSize\r\n        this.setSubject(subject)\r\n    }\r\n\r\n    setSubject(e) {\r\n        this.subject = e ? e.pos || e : this.pos\r\n        this.offset = { x: 0, y: 0 }\r\n\r\n        // Center on the entity\r\n        if (e && e.w) {\r\n            this.offset.x += e.w / 2\r\n            this.offset.y += e.h / 2\r\n        }\r\n        if (e && e.anchor) {\r\n            this.offset.x -= e.anchor.x\r\n            this.offset.y -= e.anchor.y\r\n        }\r\n        this.focus()\r\n    }\r\n\r\n    focus() {\r\n        const { pos, w, h, worldSize, subject, offset } = this\r\n\r\n        const centeredX = subject.x + offset.x - w / 2\r\n        const maxX = worldSize.w - w\r\n        const x = -math.clamp(centeredX, 0, maxX)\r\n\r\n        const centeredY = subject.y + offset.y - h / 2\r\n        const maxY = worldSize.h - h\r\n        const y = -math.clamp(centeredY, 0, maxY)\r\n\r\n        pos.x = x\r\n        pos.y = y\r\n    }\r\n\r\n    update(dt, t) {\r\n        super.update(dt, t)\r\n\r\n        if (this.subject) {\r\n            this.focus()\r\n        }\r\n    }\r\n}\r\n\r\nexport default Camera\r\n","const Scale = {\r\n    RESIZE: 0,\r\n    NONE: 1\r\n}\r\n\r\nconst State = {\r\n    NONE: 0,\r\n    LOADING: 1,\r\n    READY: 2,\r\n    RUNNING: 3,\r\n    SLEEPING: 4\r\n}\r\n\r\nconst Graph = {\r\n    ROUND_RECT: 0,\r\n    RECT: 1\r\n}\r\n\r\nexport {\r\n    Scale,\r\n    State,\r\n    Graph\r\n}","class Container {\r\n\r\n  constructor() {\r\n    this.pos = { x: 0, y: 0 }\r\n    this.children = []\r\n  }\r\n\r\n  update(dt, t) {\r\n    this.children = this.children.filter(child => {\r\n      if (child.update) {\r\n        child.update(dt, t, this)\r\n      }\r\n      return child.dead ? false : true\r\n    })\r\n  }\r\n\r\n  add(child) {\r\n    this.children.push(child)\r\n    return child\r\n  }\r\n\r\n  remove(child) {\r\n    this.children = this.children.filter(c => c !== child)\r\n    return child\r\n  }\r\n\r\n  map(f) {\r\n    return this.children.map(f)\r\n  }\r\n\r\n}\r\n\r\nexport default Container\r\n","import Container from \"./Container.js\"\r\nimport Text from \"./Text.js\"\r\n\r\nclass Debug extends Container {\r\n    constructor() {\r\n        super()\r\n        this.active = false\r\n        const fpsTxt = new Text('fps: ')\r\n        fpsTxt.name = 'fps'\r\n        fpsTxt.pos = { x: 5, y: 15 }\r\n        fpsTxt.style = { font: '16px Arial', fill: 'red', align: 'left' }\r\n        this.add(fpsTxt)\r\n    }\r\n}\r\n\r\nexport default Debug","import Renderer from \"./Renderer.js\"\r\nimport { KeyControls } from \"./Inputs.js\"\r\nimport Debug from \"./Debug.js\"\r\n\r\nclass Game {\r\n\r\n  step = 1 / 60\r\n  MAX_FRAME = this.step * 5\r\n\r\n  constructor(config) {\r\n    this.w = config.w\r\n    this.h = config.h\r\n    this.renderer = this.createRenderer(config)\r\n    this.scenes = []\r\n    this.scene\r\n    this.textures\r\n    this.controls = new KeyControls()\r\n    this.debug = new Debug()\r\n    this.debug.active = config.debugMode\r\n  }\r\n\r\n  addScene(scene) {\r\n    if (this.debug.active)\r\n      scene.add(this.debug)\r\n\r\n    if (!this.scene)\r\n      this.scene = scene\r\n\r\n    this.scenes.push(scene)\r\n  }\r\n\r\n  launchScene(sceneName) {\r\n    this.scene = this.scenes.find(s => s.key === sceneName)\r\n    this.scene.init()\r\n  }\r\n\r\n  run(gameUpdate = () => { }) {\r\n    const { MAX_FRAME } = this\r\n    let dt = 0\r\n    let last = 0\r\n    let fps = 0\r\n\r\n    const mainloop = ms => {\r\n      requestAnimationFrame(mainloop)\r\n      // create delta\r\n      const t = ms / 1000\r\n      dt = Math.min(t - last, MAX_FRAME)\r\n      last = t\r\n      fps = Math.round(1 / dt)\r\n\r\n      if (!this.scene && this.debug.active)\r\n        return\r\n\r\n      if (this.debug.active)\r\n        this.scene.children.find(child => child instanceof Debug).children.find(c => c.name === \"fps\").text = 'fps: ' + fps\r\n\r\n      this.scene.update(dt, t)\r\n      gameUpdate(dt, t, this.controls)\r\n      this.renderer.render(this.scene)\r\n\r\n    }\r\n    requestAnimationFrame(mainloop)\r\n  }\r\n\r\n  createRenderer(config) {\r\n    const renderer = new Renderer(config)\r\n    const parent = config.parent || \"game\"\r\n    let el = document.querySelector(config.parent)\r\n    if (!el) {\r\n      document.body.innerHTML = '<div id=\"' + parent + '\"></div>'\r\n    }\r\n    document.getElementById(parent).appendChild(renderer.view)\r\n    return renderer;\r\n  }\r\n}\r\n\r\nexport default Game","import Container from \"./Container.js\"\r\nclass GameObject {\r\n  constructor(name = null) {\r\n    this.name = name\r\n    this.pos = { x: 0, y: 0 }\r\n    this.scale = { x: 1, y: 1 }\r\n    this.anchor = { x: 0, y: 0 }\r\n    this.pivot = { x: 0, y: 0 }\r\n    this.rotation = 0\r\n    this.visible = true\r\n    this.zIndex = 1\r\n  }\r\n}\r\n\r\nexport default GameObject","import GameObject from \"./GameObject.js\"\r\n\r\nclass Graphics extends GameObject {\r\n    constructor(type = null) {\r\n        super()\r\n        this.type = type\r\n        this.src = {}\r\n    }\r\n}\r\n\r\nexport default Graphics","class KeyControls {\r\n    constructor() {\r\n        this.keys = {}\r\n        document.addEventListener(\"keydown\", e => {\r\n            // Check is a trick to stop the browser scrolling if the game is embedded in a web page that has scrollbars\r\n            if ([37, 38, 39, 40, 32].indexOf(e.which) >= 0) {\r\n                e.preventDefault()\r\n            }\r\n            this.keys[e.keyCode] = true\r\n        }, false)\r\n\r\n        document.addEventListener(\"keyup\", e => {\r\n            this.keys[e.which] = false\r\n        }, false)\r\n    }\r\n\r\n    key(key, value) {\r\n        if (value !== undefined) {\r\n            this.keys[key] = value\r\n        }\r\n        return this.keys[key]\r\n    }\r\n\r\n    reset() {\r\n        for (let key in this.keys) {\r\n            this.keys[key] = false\r\n        }\r\n    }\r\n\r\n    // Handle key actions\r\n    get action() {\r\n        return this.keys[32]\r\n    }\r\n\r\n    get x() {\r\n        // left arrow or A key\r\n        if (this.keys[37] || this.keys[65]) {\r\n            return -1\r\n        }\r\n        // right arrow or D key\r\n        if (this.keys[39] || this.keys[68]) {\r\n            return 1\r\n        }\r\n        return 0\r\n    }\r\n\r\n    get y() {\r\n        // up arrow or W key\r\n        if (this.keys[38] || this.keys[87]) {\r\n            return -1\r\n        }\r\n        // down arrow or S key\r\n        if (this.keys[40] || this.keys[83]) {\r\n            return 1\r\n        }\r\n        return 0\r\n    }\r\n}\r\n\r\nclass MouseControls {\r\n    constructor(container) {\r\n        this.el = container || document.body\r\n\r\n        this.pos = { x: 0, y: 0 }\r\n        this.isDown = false\r\n        this.pressed = false\r\n        this.released = false\r\n\r\n        // Handlers\r\n        document.addEventListener(\"mousedown\", e => this.down(e), false)\r\n        document.addEventListener(\"mouseup\", e => this.up(e), false)\r\n        document.addEventListener(\"mousemove\", e => this.move(e), false)\r\n    }\r\n\r\n    mousePosFromEvent({ clientX, clientY }) {\r\n        const { el, pos } = this\r\n        const rect = el.getBoundingClientRect()\r\n        const xr = el.width / el.clientWidth\r\n        const yr = el.height / el.clientHeight\r\n        pos.x = (clientX - rect.left) * xr\r\n        pos.y = (clientY - rect.top) * yr\r\n    }\r\n\r\n    down(e) {\r\n        this.isDown = true\r\n        this.pressed = true\r\n        this.mousePosFromEvent(e)\r\n    }\r\n\r\n    up() {\r\n        this.isDown = false\r\n        this.released = true\r\n    }\r\n\r\n    move(e) {\r\n        this.mousePosFromEvent(e)\r\n    }\r\n\r\n    update() {\r\n        this.released = false\r\n        this.pressed = false\r\n    }\r\n}\r\n\r\nexport {\r\n    KeyControls,\r\n    MouseControls\r\n}\r\n","import Sprite from \"./Sprite.js\"\r\nimport Graphics from \"./Graphics.js\"\r\nimport { Graph } from './Constants.js'\r\n\r\nclass Render {\r\n\r\n    constructor(config) {\r\n        const canvas = document.createElement(\"canvas\")\r\n        this.view = canvas\r\n        this.ctx = canvas.getContext(\"2d\")\r\n        this.ctx.textBaseline = \"top\"\r\n        this.w = canvas.width = config.w\r\n        this.h = canvas.height = config.h\r\n        if (config.pixel) {\r\n            canvas.style.imageRendering = 'pixelated'\r\n            this.ctx.imageSmoothingEnabled = false\r\n        }\r\n    }\r\n\r\n    render(scene, clear = true) {\r\n        if (scene.active == false) {\r\n            return\r\n        }\r\n\r\n        const { ctx, w, h } = this\r\n\r\n        function renderRec(scene) {\r\n            // Render the container children\r\n            scene.children.forEach(child => {\r\n                if (child.visible == false) {\r\n                    return\r\n                }\r\n                ctx.save()\r\n\r\n                // Handle transforms\r\n                if (child.pos) {\r\n                    ctx.translate(Math.round(child.pos.x), Math.round(child.pos.y))\r\n                }\r\n                if (child.anchor) {\r\n                    ctx.translate(child.anchor.x, child.anchor.y);\r\n                }\r\n                if (child.scale) {\r\n                    ctx.scale(child.scale.x, child.scale.y)\r\n                }\r\n                if (child.rotation) {\r\n                    const px = child.pivot ? child.pivot.x : 0;\r\n                    const py = child.pivot ? child.pivot.y : 0;\r\n                    ctx.translate(px, py);\r\n                    ctx.rotate(child.rotation);\r\n                    ctx.translate(-px, -py);\r\n                }\r\n\r\n                // Draw the leaf nodes\r\n                if (child.text) {\r\n                    const { font, fill, align } = child.style\r\n                    if (font) ctx.font = font\r\n                    if (fill) ctx.fillStyle = fill\r\n                    if (align) ctx.textAlign = align\r\n                    ctx.fillText(child.text, 0, 0)\r\n                } else if (child instanceof Sprite && child.texture) {\r\n                    const img = child.texture\r\n                    if (child.tileW) {\r\n                        ctx.drawImage(\r\n                            img,\r\n                            child.frame.x * child.tileW,\r\n                            child.frame.y * child.tileH,\r\n                            child.tileW,\r\n                            child.tileH,\r\n                            0,\r\n                            0,\r\n                            child.tileW,\r\n                            child.tileH\r\n                        );\r\n                    } else {\r\n                        ctx.drawImage(img, 0, 0);\r\n                    }\r\n                } else if (child instanceof Graphics) {\r\n                    if (child.type === Graph.ROUND_RECT) {\r\n                        const { w, h, r, fill } = child.src\r\n                        const { x, y } = child.pos\r\n                        ctx.strokeStyle = fill;\r\n                        if (w < 2 * r) r = w / 2;\r\n                        if (h < 2 * r) r = h / 2;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(x + r, y);\r\n                        ctx.arcTo(x + w, y, x + w, y + h, r);\r\n                        ctx.arcTo(x + w, y + h, x, y + h, r);\r\n                        ctx.arcTo(x, y + h, x, y, r);\r\n                        ctx.arcTo(x, y, x + w, y, r);\r\n                        ctx.stroke();\r\n                        ctx.closePath();\r\n                    } else if (child.type === Graph.RECT) {\r\n                        const { w, h, fill } = child.src\r\n                        ctx.fillStyle = fill;\r\n                        ctx.fillRect(0, 0, w, h);\r\n                    }\r\n                }\r\n\r\n                // Render any child sub-nodes\r\n                if (child.children) {\r\n                    renderRec(child)\r\n                }\r\n\r\n                ctx.restore()\r\n            })\r\n        }\r\n\r\n        if (clear) {\r\n            ctx.clearRect(0, 0, w, h)\r\n        }\r\n        renderRec(scene)\r\n    }\r\n}\r\n\r\nexport default Render\r\n\r\n","import Container from \"./Container.js\"\r\nimport { State } from './Constants.js'\r\n\r\nclass Scene extends Container {\r\n  constructor(key, isActive = false) {\r\n    super()\r\n    this.key = key\r\n    this.active = isActive\r\n    this.state = State.NONE\r\n    this.controls\r\n  }\r\n}\r\n\r\nexport default Scene","import GameObject from \"./GameObject.js\"\r\nimport AnimManager from \"./AnimManager.js\"\r\n\r\nclass Sprite extends GameObject {\r\n    constructor(texture = null, w = 0, h = 0) {\r\n        super()\r\n        this.texture = texture\r\n        this.tileW = w\r\n        this.tileH = h\r\n        this.frame = { x: 0, y: 0 }\r\n        this.anims = new AnimManager(this)\r\n    }\r\n\r\n    update(dt) {\r\n        this.anims.update(dt)\r\n    }\r\n\r\n    get w() {\r\n        return this.tileW * Math.abs(this.scale.x)\r\n    }\r\n\r\n    get h() {\r\n        return this.tileH * Math.abs(this.scale.y)\r\n    }\r\n}\r\n\r\nexport default Sprite","import GameObject from \"./GameObject.js\"\r\n\r\nclass Text extends GameObject {\r\n  constructor(text = \"\") {\r\n    super()\r\n    this.text = text\r\n    this.style\r\n  }\r\n}\r\n\r\nexport default Text","class TextureManager {\r\n    constructor(urls) {\r\n        this.urls = urls\r\n        this.imgs = {}\r\n    }\r\n\r\n    load(callback) {\r\n        const p = this.urls.map(i => this.loadImage(i))\r\n        Promise.all(p)\r\n            .then(res => {\r\n                let o = this.imgs = Object.assign(...res)\r\n                return callback(o)\r\n            })\r\n            .catch(err => {\r\n                return callback(err)\r\n            })\r\n    }\r\n\r\n    loadImage(i) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new Image()\r\n            img.addEventListener('load', () => {\r\n                let o = { [i[0]]: img }\r\n                resolve(o)\r\n            })\r\n            img.addEventListener('error', () => {\r\n                console.error('Error when loading an image')\r\n                reject()\r\n            })\r\n            img.src = i[1]\r\n        })\r\n    }\r\n}\r\n\r\nexport default TextureManager","import Container from \"./Container.js\";\r\nimport Sprite from \"./Sprite.js\";\r\n\r\nclass TileMap extends Container {\r\n  constructor(texture = null) {\r\n    super();\r\n    this.mapW\r\n    this.mapH\r\n    this.tileW\r\n    this.tileH\r\n    this.texture = texture\r\n    this.children = []\r\n  }\r\n\r\n  addTiles(tiles, scale = 1) {\r\n    // Add all tile sprites\r\n    this.children = tiles.map((frame, i) => {\r\n      const s = new Sprite()\r\n      s.frame = frame;\r\n      s.scale = { x: scale, y: scale }\r\n      s.pos.x = i % this.mapW * this.tileW;\r\n      s.pos.y = Math.floor(i / this.mapW) * this.tileH;\r\n      s.tileW = this.tileW\r\n      s.tileH = this.tileH\r\n      s.texture = this.texture\r\n\r\n      return s;\r\n    });\r\n  }\r\n}\r\n\r\nexport default TileMap;\r\n","class Vector2 {\r\n    constructor(x = 0, y = 0) { this.x = x; this.y = y; }\r\n    add(v) {\r\n        (v instanceof Vector2) ? (this.x += v.x, this.y += v.y) : (this.x += v, this.y += v)\r\n        return this\r\n    }\r\n    subtract(v) {\r\n        (this.x -= v.x, this.y -= v.y)\r\n        return this\r\n    }\r\n    multiply(v) {\r\n        (v instanceof Vector2) ? (this.x *= v.x, this.y *= v.y) : (this.x *= v, this.y *= v)\r\n        return this\r\n    }\r\n    normalize(scale = 1) {\r\n        let l = this.Length()\r\n        return l > 0 ? this.Multiply(scale / l) : this.Set(scale, y = 0)\r\n    }\r\n    length() {\r\n        return Math.hypot(this.x, this.y)\r\n    }\r\n}\r\n\r\nconst RGBA = (r = 0, g = 0, b = 0, a = 1) => (`rgba(${r * 255 | 0},${g * 255 | 0},${b * 255 | 0},${a})`)\r\n\r\nfunction randf(min, max) {\r\n    if (max == null) {\r\n        max = min || 1;\r\n        min = 0;\r\n    }\r\n    return Math.random() * (max - min) + min;\r\n}\r\n\r\nfunction rand(min, max) {\r\n    return Math.floor(randf(min, max))\r\n}\r\nfunction clamp(x, min, max) {\r\n    return Math.max(min, Math.min(x, max));\r\n}\r\n\r\nexport default {\r\n    Vector2,\r\n    RGBA,\r\n    rand,\r\n    randf,\r\n    clamp\r\n}","import Scene from \"./Scene.js\"\r\nimport Game from \"./Game.js\"\r\nimport Text from \"./Text.js\"\r\nimport Sprite from \"./Sprite.js\"\r\nimport TextureManager from \"./TextureManager.js\"\r\nimport Container from \"./Container.js\"\r\nimport TileMap from \"./TileMap.js\"\r\nimport Camera from \"./Camera.js\"\r\nimport Graphics from \"./Graphics.js\"\r\nimport { Scale, State, Graph } from \"./Constants.js\"\r\nimport math from \"./utils.js\"\r\n\r\nexport {\r\n    Game,\r\n    Scene,\r\n    Text,\r\n    Sprite,\r\n    TextureManager,\r\n    Container,\r\n    TileMap,\r\n    Camera,\r\n    Graphics,\r\n    Scale,\r\n    State,\r\n    Graph,\r\n    math,\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./src/vx-one.js\");\n"],"sourceRoot":""}